<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://catpaws.top/blog-resource/imgs/logo.jpg"><link rel="icon" href="https://catpaws.top/blog-resource/imgs/logo.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="猫爪在上"><meta name="keywords" content=""><meta name="description" content="一、简介  Vue是一款用于构建用户界面的 JavaScript 框架。它基于标准 HTML、CSS 和 JavaScript 构建，并提供了一套声明式的、组件化的编程模型，帮助你高效地开发用户界面。无论是简单还是复杂的界面，Vue 都可以胜任。 二、TypeScript 三、创建Vue项目 3.1 基于 vue-cli 创建              Vue CLI 现已处"><meta property="og:type" content="article"><meta property="og:title" content="Vue3"><meta property="og:url" content="https://catpaws.top/3a42db2d/index.html"><meta property="og:site_name" content="猫爪在上の书桌"><meta property="og:description" content="一、简介  Vue是一款用于构建用户界面的 JavaScript 框架。它基于标准 HTML、CSS 和 JavaScript 构建，并提供了一套声明式的、组件化的编程模型，帮助你高效地开发用户界面。无论是简单还是复杂的界面，Vue 都可以胜任。 二、TypeScript 三、创建Vue项目 3.1 基于 vue-cli 创建              Vue CLI 现已处"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251002190411922-2025-10-219:04:16.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe-2025-10-219:09:17.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f-2025-10-219:09:48.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251002210525213-2025-10-221:05:25.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251002214706994-2025-10-221:47:16.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251003133736624-2025-10-313:37:40.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251003135522038-2025-10-313:55:22.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251009194444261-2025-10-919:44:59.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251003180800383-2025-10-318:08:32.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251003182118155-2025-10-318:21:25.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251003183723258-2025-10-318:37:25.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251005232322763-2025-10-523:25:54.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/lifecycle_zh-CN.W0MNXI0C-2025-10-417:04:55.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251004175922561-2025-10-417:59:38.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20231018144351536-2025-10-418:12:17.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251004184005764-2025-10-418:40:11.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251004203748962-2025-10-420:37:49.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251004211241951-2025-10-421:12:43.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251005000038956-2025-10-500:00:45.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251005114733860-2025-10-511:47:44.png"><meta property="og:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20231119185900990-2025-10-522:35:14.png"><meta property="article:published_time" content="2025-03-02T13:22:14.000Z"><meta property="article:modified_time" content="2025-10-09T11:45:44.512Z"><meta property="article:author" content="猫爪在上"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://gitee.com/cmyk359/img/raw/master/img/image-20251002190411922-2025-10-219:04:16.png"><title>Vue3 - 猫爪在上の书桌</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/font.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/poem.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/cursor.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/loader.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/twikoo_beautify.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/indeximg-hover.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/wave-1.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/blurpicload.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/reward/iconfont.css"><link rel="stylesheet" href="//catpaws.top/blog-resource/css/switch.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"catpaws.top",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"https://catpaws.top/blog-resource/imgs/transparent.svg",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"TNTPv22capMq3aFV9S0sLqSm-gzGzoHsz",app_key:"G2BBAxXmiixopVg5mIJ2sxXR",server_url:"https://leancloud.catpaws.top",path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loader-container"><div class="loader"><div class="wrapper"><div class="catContainer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 733 673" class="catbody"><path fill="#212121" d="M111.002 139.5C270.502 -24.5001 471.503 2.4997 621.002 139.5C770.501 276.5 768.504 627.5 621.002 649.5C473.5 671.5 246 687.5 111.002 649.5C-23.9964 611.5 -48.4982 303.5 111.002 139.5Z"></path><path fill="#212121" d="M184 9L270.603 159H97.3975L184 9Z"></path><path fill="#212121" d="M541 0L627.603 150H454.397L541 0Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 158 564" class="tail"><path fill="#191919" d="M5.97602 76.066C-11.1099 41.6747 12.9018 0 51.3036 0V0C71.5336 0 89.8636 12.2558 97.2565 31.0866C173.697 225.792 180.478 345.852 97.0691 536.666C89.7636 553.378 73.0672 564 54.8273 564V564C16.9427 564 -5.4224 521.149 13.0712 488.085C90.2225 350.15 87.9612 241.089 5.97602 76.066Z"></path></svg><div class="text"><span class="bigzzz">Z</span> <span class="zzz">Z</span></div></div><div class="wallContainer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 500 126" class="wall"><line stroke-width="6" stroke="#7C7C7C" y2="3" x2="450" y1="3" x1="50"></line><line stroke-width="6" stroke="#7C7C7C" y2="85" x2="400" y1="85" x1="100"></line><line stroke-width="6" stroke="#7C7C7C" y2="122" x2="375" y1="122" x1="125"></line><line stroke-width="6" stroke="#7C7C7C" y2="43" x2="500" y1="43"></line><line stroke-width="6" stroke="#7C7C7C" y2="1.99391" x2="115.5" y1="43.0061" x1="115.5"></line><line stroke-width="6" stroke="#7C7C7C" y2="2.00002" x2="189" y1="43.0122" x1="189"></line><line stroke-width="6" stroke="#7C7C7C" y2="2.00612" x2="262.5" y1="43.0183" x1="262.5"></line><line stroke-width="6" stroke="#7C7C7C" y2="2.01222" x2="336" y1="43.0244" x1="336"></line><line stroke-width="6" stroke="#7C7C7C" y2="2.01833" x2="409.5" y1="43.0305" x1="409.5"></line><line stroke-width="6" stroke="#7C7C7C" y2="43" x2="153" y1="84.0122" x1="153"></line><line stroke-width="6" stroke="#7C7C7C" y2="43" x2="228" y1="84.0122" x1="228"></line><line stroke-width="6" stroke="#7C7C7C" y2="43" x2="303" y1="84.0122" x1="303"></line><line stroke-width="6" stroke="#7C7C7C" y2="43" x2="378" y1="84.0122" x1="378"></line><line stroke-width="6" stroke="#7C7C7C" y2="84" x2="192" y1="125.012" x1="192"></line><line stroke-width="6" stroke="#7C7C7C" y2="84" x2="267" y1="125.012" x1="267"></line><line stroke-width="6" stroke="#7C7C7C" y2="84" x2="342" y1="125.012" x1="342"></line></svg></div></div></div></div><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>猫爪在上の书桌</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-addrcard"></i> <span>个人主页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> <span>博客</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/" target="_self"><i class="iconfont icon-pen"></i> <span>文章</span> </a><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item"><a class="nav-link" href="/messages/" target="_self"><i class="iconfont icon-comment"></i> <span>留言板</span></a></li><li class="nav-item"><a class="nav-link" href="/timeline/" target="_self"><i class="iconfont icon-images"></i> <span>时光轴</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://catpaws.top/blog-resource/imgs/article-bg.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Vue3"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-03-02 21:22" pubdate>2025年3月2日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 16k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 136 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Vue3</h1><p id="updated-time" class="note note-info">本文最后更新于 2025年10月9日 晚上</p><div class="markdown-body"><meta name="referrer" , content="no-referrer"><h2 id="一简介">一、简介</h2><p><img src="https://gitee.com/cmyk359/img/raw/master/img/vue-2025-10-218:41:03.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload></p><p>Vue是一款用于构建用户界面的 JavaScript 框架。它基于标准 HTML、CSS 和 JavaScript 构建，并提供了一套声明式的、组件化的编程模型，帮助你高效地开发用户界面。无论是简单还是复杂的界面，Vue 都可以胜任。</p><h2 id="二typescript">二、TypeScript</h2><h2 id="三创建vue项目">三、创建Vue项目</h2><h3 id="基于-vue-cli-创建">3.1 基于 vue-cli 创建</h3><div class="note note-warning"><p>Vue CLI 现已处于维护模式！现在官方推荐使用 <a target="_blank" rel="noopener" href="https://github.com/vuejs/create-vue"><code>create-vue</code></a> 来创建基于 <a target="_blank" rel="noopener" href="https://cn.vitejs.dev/">Vite</a> 的新项目</p></div><p>Vue-cli 是Vue官方提供的一个脚手架，用于快速生成一个 Vue 的项目模板，依赖于NodeJS。</p><p>Vue-cli提供了如下功能：</p><ul><li>统一的目录结构</li><li>本地调试</li><li>热部署</li><li>单元测试</li><li>集成打包上线</li></ul><div class="code-wrapper"><pre><code class="hljs powershell"><span class="hljs-comment">## 安装或者升级你的@vue/cli </span>
npm install <span class="hljs-literal">-g</span> @vue/<span class="hljs-built_in">cli</span>

<span class="hljs-comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span>
vue <span class="hljs-literal">--version</span>

<span class="hljs-comment">## 执行创建命令</span>
vue create vue_test

<span class="hljs-comment">##  随后选择3.x</span>
<span class="hljs-comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span>
<span class="hljs-comment">##  &gt; 3.x</span>
<span class="hljs-comment">##    2.x</span>

<span class="hljs-comment">## 启动</span>
<span class="hljs-built_in">cd</span> vue_test
npm run serve</code></pre></div><p>基于Vue脚手架创建出来的工程，有标准的目录结构，如下：</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251002190411922-2025-10-219:04:16.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><h3 id="基于-vite-创建推荐">3.2 基于 vite 创建（推荐）</h3><p><code>vite</code> 是新一代前端构建工具，官网地址：<a target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p><ul><li><p>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</p></li><li><p>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</p></li><li><p>真正的按需编译，不再等待整个应用编译完成。</p></li></ul><p><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe-2025-10-219:09:17.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="webpack构建" style="zoom:80%"></p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f-2025-10-219:09:48.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="vite构建" style="zoom:80%"></p><p>创建过程：</p><div class="code-wrapper"><pre><code class="hljs powershell"><span class="hljs-comment">## 1.创建命令</span>
npm create vue@latest

<span class="hljs-comment">## 2.具体配置</span>
<span class="hljs-comment">## 配置项目名称</span>
√ Project name: vue3_test
<span class="hljs-comment">## 是否添加TypeScript支持</span>
√ Add TypeScript?  Yes
<span class="hljs-comment">## 是否添加JSX支持</span>
√ Add JSX Support?  No
<span class="hljs-comment">## 是否添加路由环境</span>
√ Add Vue Router <span class="hljs-keyword">for</span> Single Page Application development?  No
<span class="hljs-comment">## 是否添加pinia环境</span>
√ Add Pinia <span class="hljs-keyword">for</span> state management?  No
<span class="hljs-comment">## 是否添加单元测试</span>
√ Add Vitest <span class="hljs-keyword">for</span> Unit Testing?  No
<span class="hljs-comment">## 是否添加端到端测试方案</span>
√ Add an <span class="hljs-keyword">End</span><span class="hljs-literal">-to-End</span> Testing Solution? » No
<span class="hljs-comment">## 是否添加ESLint语法检查</span>
√ Add ESLint <span class="hljs-keyword">for</span> code quality?  Yes
<span class="hljs-comment">## 是否添加Prettiert代码格式化</span>
√ Add Prettier <span class="hljs-keyword">for</span> code formatting?  No</code></pre></div><p>新创建的vue项目结构如下，之后需使用<code>npm i</code>安装项目所需依赖。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251002210525213-2025-10-221:05:25.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><ul><li><code>.vscode</code>：vscode插件相关配置</li><li><code>public</code>目录：存放静态资源，它们会<strong>直接被复制</strong>到构建输出目录的根目录下，不经过 Vite 的构建处理。</li><li><code>src</code>目录：源代码目录，需要花费最多时间进行开发的目录。<ul><li><code>/assets</code>：静态资源目录，其中的资源需要经过vite构建处理，如压缩、优化。</li><li><code>/components</code> ：存放可复用的 Vue 组件。每个组件都是一个独立的 <code>.vue</code> 文件，包含自己的模板、逻辑和样式。</li><li><code>App.vue</code>：<strong>应用的根组件</strong>。所有其他组件都将作为它的子组件存在。它定义了整个应用的基本布局和结构。</li><li><code>main.ts</code>：<strong>应用的入口文件</strong>。它创建 Vue 应用实例，并将根组件挂载到 DOM 元素上。</li></ul></li><li><code>.gitignore</code>：告诉 Git 哪些文件或目录不需要纳入版本控制。</li><li><code>index.html</code>：<strong>Vite 项目的入口文件</strong>。这与传统的 Webpack 项目不同，Vite 直接将 <code>index.html</code> 置于根目录。</li><li><code>package.json</code>：它定义了项目的基本信息、依赖项以及可运行的脚本命令。</li><li><code>tsconfig.json</code> ：主TypeScript 配置。现代 Vite 项目使用"项目引用"来分离配置，这个文件主要作为入口，引用其他具体配置。<ul><li><code>env.d.ts</code>：Vite 环境类型声明</li><li><code>tsconfig.app.json</code> ：应用代码配置。<ul><li><code>extends</code>: 继承 Vue 的 DOM 环境预设配置</li><li><code>include</code>: 指定要编译的文件范围</li><li><code>paths</code>: 配置路径别名，<code>@/*</code> 指向 <code>./src/*</code></li></ul></li><li><code>tsconfig.node.json</code> ：工具链配置。</li></ul></li><li><code>vite.config.ts</code>：vite配置文件</li></ul><p>运行流程：Vite 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。加载<code>index.html</code>后，解析 <code>&lt;script type="module" src="xxx"&gt;</code> 指向的<code>JavaScript</code>。在其中创建应用并绑定到<code>index.html</code>中id为app的元素上。</p><p>编写一个vue项目可以比作种花，<code>main.ts</code>中引入的<code>createApp</code>方法可比作花盆，<code>App.vue</code>相当于花的根，之后创建个各种组件就相当于叶子和花朵。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251002214706994-2025-10-221:47:16.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><h2 id="四vue3核心语法">四、Vue3核心语法</h2><h3 id="optionsapi-与-compositionapi">4.1 OptionsAPI 与 CompositionAPI</h3><ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li><li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul><p>OptionAPI的弊端：<code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的。若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p><p>CompositionAPI可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。同一个逻辑关注点相关的代码被归为了一组：无需再为了一个逻辑关注点在不同的选项块间来回滚动切换。此外，我们现在可以很轻松地将这一组代码移动到一个外部文件中，不再需要为了抽象而重新组织代码，大大降低了重构成本，这在长期维护的大型项目中非常关键。</p><h3 id="拉开序幕的setup">4.2 拉开序幕的setup</h3><h4 id="概述">概述</h4><p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个<strong>函数</strong>，它是 <code>Composition API</code> “表演的舞台”，组件中所用到的：数据、方法、计算属性、监视......等等，均配置在<code>setup</code>中。</p><p>特点如下：</p><ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li><li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li><li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li></ul><p>示例：使用Vue2的选项式API编写一个<code>Person</code>组件</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改姓名<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeAge&quot;</span>&gt;</span>修改年龄<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showTel&quot;</span>&gt;</span> 查看联系方式<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
<span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Person&#x27;</span>,</span>
<span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        <span class="hljs-keyword">return</span> &#123;</span>
<span class="language-javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">tel</span>: <span class="hljs-string">&#x27;13855555555&#x27;</span></span>
<span class="language-javascript">        &#125;;</span>
<span class="language-javascript">    &#125;,</span>
<span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span>
<span class="language-javascript">        <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;zhang san&#x27;</span>;</span>
<span class="language-javascript">        &#125;,</span>
<span class="language-javascript">        <span class="hljs-title function_">changeAge</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>++;</span>
<span class="language-javascript">        &#125;,</span>
<span class="language-javascript">        <span class="hljs-title function_">showTel</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tel</span>);</span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><p>改为组合式API</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改姓名<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeAge&quot;</span>&gt;</span>修改年龄<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showTel&quot;</span>&gt;</span> 查看联系方式<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
<span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Person&#x27;</span>,</span>
<span class="language-javascript">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        <span class="hljs-comment">//数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span></span>
<span class="language-javascript">        <span class="hljs-keyword">let</span> name = <span class="hljs-string">&#x27;张三&#x27;</span>;</span>
<span class="language-javascript">        <span class="hljs-keyword">let</span> age = <span class="hljs-number">30</span>;</span>
<span class="language-javascript">        <span class="hljs-keyword">let</span> tel = <span class="hljs-string">&#x27;13855555555&#x27;</span>;</span>
<span class="language-javascript"></span>
<span class="language-javascript">        <span class="hljs-comment">//方法，原来写在methods中</span></span>
<span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            name = <span class="hljs-string">&#x27;zhang san&#x27;</span>;</span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeAge</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            age++;</span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">showTel</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">            <span class="hljs-title function_">alert</span>(tel);</span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">		 <span class="hljs-comment">// 返回一个对象，对象中的内容，模板中可以直接使用	</span></span>
<span class="language-javascript">        <span class="hljs-keyword">return</span> &#123; name, age, changeName, changeAge, showTel &#125;;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><h4 id="setup的返回值">setup的返回值</h4><ul><li><p>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用<strong>（重点）。</strong></p></li><li><p>若返回一个<strong>函数</strong>：则可以自定义渲染内容</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-function">()=&gt;</span> <span class="hljs-string">&#x27;你好啊！&#x27;</span>
&#125;</code></pre></div></li></ul><h4 id="setup-与-options-api-的关系">setup 与 Options API 的关系</h4><ul><li>Vue2 的配置（<code>data</code>、<code>methos</code>......）可以与 setup同时存在</li><li>Vue2的配置（<code>data</code>、<code>methos</code>......）中<strong>可以访问到</strong> setup中的属性、方法，<strong>反之却不行</strong>。</li><li>如果与Vue2冲突，则setup优先。</li></ul><p>关键：由于setup是最早的生命周期，它内部的属性和方法先被加载</p><h4 id="setup语法糖">setup语法糖</h4><p>setup函数有一个语法糖: <code>&lt;script setup&gt;&lt;/script&gt;</code>。它可以让我们把setup独立出去，不用再写setup函数，并且不用再手动return对象。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003133736624-2025-10-313:37:40.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 使用setup语法糖简化： --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeAge&quot;</span>&gt;</span>年龄+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
<span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Person&#x27;</span><span class="hljs-comment">//组件名称</span></span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> name = <span class="hljs-string">&#x27;张三&#x27;</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> age = <span class="hljs-number">18</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> tel = <span class="hljs-string">&#x27;13888888888&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 方法，原来写在methods中</span></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        name = <span class="hljs-string">&#x27;zhang-san&#x27;</span> <span class="hljs-comment">//注意：此时这么修改name页面是不变化的</span></span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeAge</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        age += <span class="hljs-number">1</span> <span class="hljs-comment">//注意：此时这么修改age页面是不变化的</span></span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">showTel</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        <span class="hljs-title function_">alert</span>(tel)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><p>可以进一步简化，借助插件将声明组件名称的script代码合并到setup标签中：在setup标签中通过<code>name</code>属性指定组件的名称。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003135522038-2025-10-313:55:22.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><ol type="1"><li><p>安装插件：<code>npm i vite-plugin-vue-setup-extend -D</code></p></li><li><p>在项目中引用该插件：修改<code>vite.config.ts</code></p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueSetupExtend</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-setup-extend&#x27;</span> <span class="hljs-comment">//引入</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;
  <span class="hljs-attr">plugins</span>: [ <span class="hljs-title class_">VueSetupExtend</span>() ] <span class="hljs-comment">//在plugin中添加该插件</span>
&#125;)</code></pre></div></li></ol><hr><p>再补充一个 一键生成setup语法糖格式的vue3模板插件： <code>Vue 3 Snippets</code>, 在插件市场就可以找到，之后在新文件中输入<code>vinit</code>+回车 即可</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251009194444261-2025-10-919:44:59.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><h3 id="创建响应式数据">4.3 创建响应式数据</h3><h4 id="ref创建基本类型的响应式数据">ref：创建基本类型的响应式数据</h4><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//定义响应式变量</span>
<span class="hljs-keyword">import</span> &#123;ref&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">let</span> xxx = <span class="hljs-title function_">ref</span>(初始值)</code></pre></div><p>将初始值传递给ref函数，它会返回一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>。<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>，因此：</p><ul><li>JS中操作数据需要：<code>xxx.value</code>，但在模板中会自动解包，不需要<code>.value</code>，直接使用即可。</li><li>对于<code>let name = ref('张三')</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 使用setup语法糖简化： --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeAge&quot;</span>&gt;</span>年龄+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person234&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">    <span class="hljs-comment">// name和age是一个ref对象，它们的value属性是响应式的。</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;张三&#x27;</span>)  </span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>)  </span>
<span class="language-javascript">    <span class="hljs-comment">//tel就是一个普通的字符串，不是响应式的</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> tel = <span class="hljs-string">&#x27;13888888888&#x27;</span>  </span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 方法</span></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        name.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;zhang-san&#x27;</span>   <span class="hljs-comment">// JS中操作ref对象时候需要添加.value</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeAge</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        age.<span class="hljs-property">value</span> += <span class="hljs-number">1</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">showTel</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        <span class="hljs-title function_">alert</span>(tel)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><p>观察响应式数据和普通数据的结构：</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003180149309-2025-10-318:02:09.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload></p><div class="note note-info"><p>在vscode中安装vue插件后，可以开启自动为响应式数据添加.value的功能</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003180800383-2025-10-318:08:32.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p></div><h4 id="reactive创建对象类型的响应式数据">reactive：创建对象类型的响应式数据</h4><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 定义一个响应式对象</span>
<span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">let</span> 响应式对象 = <span class="hljs-title function_">reactive</span>(源对象)</code></pre></div><p>将源对象传递给<code>reactive</code>方法，返回一个<code>Proxy</code>的实例对象，简称响应式对象。</p><ul><li>在JS和模板中不需要<code>.value</code>，直接使用即可。</li><li>reactive方法只能接收对象类型，不能接收基本数据类型。</li><li><code>reactive</code>定义的响应式数据是“深层次”的，不论对象嵌套地多深。</li></ul><div class="note note-primary"><p>使用<code>reactive</code>创建的响应式对象，实际上是通过Proxy代理了该对象。当我们访问或修改该对象的属性时，会触发Proxy的get和set陷阱，从而实现响应式。</p></div><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 使用setup语法糖简化： --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;car&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeBrand&quot;</span>&gt;</span>修改车的品牌<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changePrice&quot;</span>&gt;</span>修改车的价格<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Car&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"><span class="hljs-comment">// 数据</span></span>
<span class="language-javascript"><span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-comment">// 方法，原来写在methods中</span></span>
<span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">changeBrand</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">    car.<span class="hljs-property">brand</span> = <span class="hljs-string">&quot;宝马&quot;</span>;</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">changePrice</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">    car.<span class="hljs-property">price</span> += <span class="hljs-number">10</span>;</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003182118155-2025-10-318:21:25.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="响应式对象结构" style="zoom:80%"></p><div class="note note-warning"><p>若reactive对象的属性为ref对象，在访问或修改这个属性时，Vue会自动对其进行解包，也就是说我们不需要通过<code>.value</code>来访问<code>ref</code>的值。</p><p>这是因为在Vue 3的源码中，对<code>reactive</code>对象进行属性访问时，如果检测到该属性是一个<code>ref</code>，那么就会返回这个<code>ref</code>的<code>value</code>值。同样地，当给这个属性赋值时，如果这个属性是一个<code>ref</code>，那么会直接将值赋给这个<code>ref</code>的<code>value</code>。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; 
    <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, 
    <span class="hljs-attr">price</span>: <span class="hljs-number">100</span>,
	<span class="hljs-attr">color</span>: <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;red&quot;</span>)
&#125;);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car.<span class="hljs-property">color</span>) <span class="hljs-comment">//red</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car.<span class="hljs-property">color</span>.<span class="hljs-property">value</span>) <span class="hljs-comment">//undefinded</span></code></pre></div></div><h4 id="ref创建对象类型的响应式数据">ref：创建对象类型的响应式数据</h4><p>实际上，<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 使用setup语法糖简化： --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;game&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>游戏列表<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;game in games&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;game.id&quot;</span>&gt;</span>&#123;&#123; game.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeGame&quot;</span>&gt;</span>修改第一个游戏<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person234&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"><span class="hljs-keyword">let</span> games = <span class="hljs-title function_">ref</span>([</span>
<span class="language-javascript">    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;jnmnxsi01&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;王者荣耀&#x27;</span> &#125;,</span>
<span class="language-javascript">    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;jnmnxsi02&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;和平精英&#x27;</span> &#125;,</span>
<span class="language-javascript">    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;jnmnxsi03&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;英雄联盟&#x27;</span> &#125;</span>
<span class="language-javascript">])</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">changeGame</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">    <span class="hljs-comment">//先使用.value接触到响应式数据：proxy对象，再调用其属性</span></span>
<span class="language-javascript">    games.<span class="hljs-property">value</span>[<span class="hljs-number">0</span>] = &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;jnmnxsi01&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;DOTA2&#x27;</span> &#125;</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251003183723258-2025-10-318:37:25.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="ref响应式对象的结构" style="zoom:80%"></p><h4 id="ref与reactive对比">ref与reactive对比</h4><p>宏观角度看：</p><ol type="1"><li><p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p></li><li><p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p></li></ol><p>区别：</p><ol type="1"><li><code>ref</code>创建的变量必须使用<code>.value</code></li><li><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</li></ol><p>使用原则：</p><ol type="1"><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li><li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li><li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol><hr><p>补充：<code>reactive</code>重新分配一个新对象的问题。</p><p>在下面的代码中，<code>car</code>是一个指向响应式对象的引用（变量），它只是一个普通的变量。模板在初始化时建立的是与旧响应式对象<code>&#123; brand: "奔驰", price: 100 &#125;</code>的依赖关系。当直接给<code>car</code>变量赋值一个新的响应式对象时，将<code>car</code>变量指向了一个新的响应式对象，而原来模板中（或其他地方）引用的仍然是旧的响应式对象,模板并没有更新到新的对象，因此这种替换不会生效。</p><p>所以，正确的做法是不要直接替换整个对象，而是用<code>Object.assign</code>去更新原响应式对象的属性。</p><div class="code-wrapper"><pre><code class="hljs javascript">&lt;template&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;car&quot;</span>&gt;</span></span>
<span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
<span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeCar&quot;</span>&gt;</span>换一辆车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Car&quot;</span>&gt;</span><span class="language-javascript"></span></span>
<span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span>
<span class="language-javascript"><span class="language-xml"></span></span>
<span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);</span></span>
<span class="language-javascript"><span class="language-xml">	</span></span>
<span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;</span></span>
<span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// car = &#123; brand: &quot;奥迪&quot;, price: 200 &#125;;  // ❌ 不能直接整体替换</span></span></span>
<span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// car = reactive(&#123; brand: &quot;奥迪&quot;, price: 200 &#125;); // ❌ car指向了新的Proxy对象引用，但所有模板和计算属性中引用的仍然是旧的响应式对象</span></span></span>
<span class="language-javascript"><span class="language-xml">        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(car, &#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">200</span> &#125;); <span class="hljs-comment">// ✅ 用Object.assign()修改属性而不是替换整个对象</span></span></span>
<span class="language-javascript"><span class="language-xml">    &#125;</span></span>
<span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre></div><p>如果确实需要替换整个对象，可以考虑使用<code>ref</code>来定义<code>car</code>。因为<code>ref</code>可以包装任何类型的值，包括对象，并且当我们将<code>ref</code>的值重新赋值为一个新对象时，响应式会保持。</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">let</span> car = <span class="hljs-title function_">ref</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;
    car.<span class="hljs-property">value</span> = &#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">200</span> &#125;;
    <span class="hljs-comment">// 执行过程：</span>
    <span class="hljs-comment">// 1. 调用 RefImpl 的 setter</span>
    <span class="hljs-comment">// 2. 检测到新值变化</span>
    <span class="hljs-comment">// 3. _value 重新赋值为 Proxy(&#123; brand: &quot;奥迪&quot;, price: 200 &#125;)</span>
    <span class="hljs-comment">// 4. 触发 triggerRefValue，通知所有依赖更新</span>
&#125;</code></pre></div><h4 id="torefs与toref">toRefs与toRef</h4><p>当我们使用<code>reactive</code>创建一个响应式对象后，如果直接通过解构赋值来获取属性，那么这些属性将会失去响应性。</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);

<span class="hljs-comment">// 解构赋值</span>
<span class="hljs-comment">// 此时，brand 和 price 是基本类型，不是响应式的</span>
<span class="hljs-keyword">let</span> &#123; brand, price &#125; = car;</code></pre></div><p><code>toRefs</code> 可以将响应式对象转换为普通对象, 但这个对象的每个属性都是指向原始对象相应属性的 <code>ref</code>，这些<code>ref</code>会保持与源对象的响应式连接。这样，在解构时，我们得到的是多个<code>ref</code>，它们仍然是响应式的。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;car&quot;</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 直接使用解构后的ref对象 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>一辆&#123;&#123; brand &#125;&#125;车，价值&#123;&#123; price &#125;&#125;万<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeCar&quot;</span>&gt;</span>换一辆车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Car&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; reactive, toRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">    <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);</span>
<span class="language-javascript">    <span class="hljs-comment">//解构为ref</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> &#123; brand, price &#125; = <span class="hljs-title function_">toRefs</span>(car)</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        <span class="hljs-comment">//直接使用ref对象</span></span>
<span class="language-javascript">        brand.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;宝马&quot;</span>;</span>
<span class="language-javascript">        price.<span class="hljs-property">value</span> = <span class="hljs-number">200</span>;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><p><code>toRefs</code>是转换整个对象的所有属性，而<code>toRef</code> 是转换指定的单个属性为<code>ref</code></p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; reactive, toRef, toRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;

<span class="hljs-keyword">let</span> car = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);

<span class="hljs-comment">// 解构赋值</span>
<span class="hljs-comment">//brand是一个 ref，与 car.brand 保持响应式连接</span>
<span class="hljs-keyword">let</span> brand = <span class="hljs-title function_">toRef</span>(car,<span class="hljs-string">&#x27;brand&#x27;</span>); 
<span class="hljs-comment">//等价于</span>
<span class="hljs-keyword">let</span> &#123;brand&#125; = <span class="hljs-title function_">toRefs</span>(car)  <span class="hljs-comment">//解构整个对象，获取它的ref类型的属性brand</span></code></pre></div><p>当使用<code>toRefs</code>或者<code>toRef</code>解构的对象没有对应属性，会创建一个 ref，其 value 为 undefined，并且如果后续给它添加了该属性，这个 ref 也会更新。</p><h3 id="computed-计算属性">4.4 computed 计算属性</h3><p>在Vue3中，计算属性的概念被保留，可以使用组合式API来定义。通过<code>computed</code>函数来创建计算属性，<strong>是一个ref对象</strong>。</p><p>Vue3中的计算属性同样具有缓存性：计算属性基于它们的依赖进行缓存，<strong>只有在依赖发生变化时才会重新计算。</strong>这适用于性能开销较大的计算，或者需要从现有数据中派生新数据的场景。</p><p>现在分为<strong>只读计算属性</strong>和<strong>可读写计算属性</strong>。</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//首先，需要从`vue`中导入`computed`。</span>
<span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-keyword">let</span> firstName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;zhang&#x27;</span>)
<span class="hljs-keyword">let</span> lastName = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;san&#x27;</span>)

<span class="hljs-comment">// 计算属性: fullName1, 只读</span>
<span class="hljs-keyword">let</span> fullName1 = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-keyword">return</span> firstName.<span class="hljs-property">value</span> + <span class="hljs-string">&#x27;-&#x27;</span> + lastName.<span class="hljs-property">value</span>
&#125;)

<span class="hljs-comment">// 计算属性：fullName2, 可读可写</span>
<span class="hljs-keyword">let</span> fullName2 = <span class="hljs-title function_">computed</span>(&#123;
    <span class="hljs-comment">//定义get、set方法</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-keyword">return</span> firstName.<span class="hljs-property">value</span> + <span class="hljs-string">&#x27;-&#x27;</span> + lastName.<span class="hljs-property">value</span>
    &#125;,
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) &#123;
        <span class="hljs-keyword">let</span> names = newValue.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>)
        firstName.<span class="hljs-property">value</span> = names[<span class="hljs-number">0</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>
        lastName.<span class="hljs-property">value</span> = names[<span class="hljs-number">1</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>
    &#125;
&#125;)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;
    fullName2.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;li-si&#x27;</span> <span class="hljs-comment">//修改计算属性时，调用set方法</span>
&#125;</code></pre></div><div class="note note-primary"><p><code>??</code> 是 JavaScript 中的空值合并运算符。它的作用是：如果左侧的表达式是 <code>null</code> 或 <code>undefined</code> ，则返回右侧的默认值；否则返回左侧的值。</p><p>与<code>??</code>类似的运算符：<code>||</code>。它会在左侧为假值，如 <code>0</code>, <code>false</code>, <code>''</code>, <code>null</code>, <code>undefined</code>时返回右侧，而 <code>??</code> 只针对 <code>null</code> 和 <code>undefined</code>。</p></div><h3 id="watch">4.5 watch</h3><p>监听一个或多个响应式数据源，并在数据源变化时调用所给的回调函数。</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123;watch&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-title function_">watch</span>(数据源，回调函数,配置对象)</code></pre></div><p><code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</p><ul><li><code>ref</code>定义的数据。</li><li><code>reactive</code>定义的数据。</li><li>返回一个值的函数（<code>getter</code>函数）。</li><li>一个包含上述内容的数组。</li></ul><p>回调函数在数据源发生变化时调用，回调函数接受三个参数：新值、旧值，以及一个用于注册副作用清理的回调函数。该回调函数会在副作用下一次重新执行前调用，可以用来清除无效的副作用，例如等待中的异步请求。</p><p>配置对象中支持以下选项：</p><ul><li><strong><code>immediate</code></strong>：在侦听器创建时立即触发回调。第一次调用时旧值是 <code>undefined</code>。</li><li><strong><code>deep</code></strong>：如果源是对象，强制深度监视，以便在深层级变更时触发回调。在 3.5+ 中，此参数还可以是指示最大遍历深度的数字。参考<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/essentials/watchers.html#deep-watchers">深层侦听器</a>。</li><li><strong><code>flush</code></strong>：调整回调函数的刷新时机。参考<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/essentials/watchers.html#callback-flush-timing">回调的刷新时机</a>及 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-core.html#watcheffect"><code>watchEffect()</code></a>。</li><li><strong><code>onTrack / onTrigger</code></strong>：调试侦听器的依赖。参考<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/extras/reactivity-in-depth.html#watcher-debugging">调试侦听器</a>。</li><li><strong><code>once</code></strong>：(3.4+) 回调函数只会运行一次。侦听器将在回调函数首次运行后自动停止。</li></ul><p>watch函数的返回值是一个函数，用于停止对当前数据源的监控。</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> stop = <span class="hljs-title function_">watch</span>(source, callback)
<span class="hljs-comment">// 当已不再需要该侦听器时：</span>
<span class="hljs-title function_">stop</span>()</code></pre></div><hr><p>针对<code>watch</code>的四种数据源，在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况</p><p>情况一：监视<code>ref</code>定义的【基本类型】数据。</p><p>直接写数据名即可，监视的是其<code>value</code>值的改变。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>情况一：监视【ref】定义的【基本类型】数据<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeSum&quot;</span>&gt;</span>点我sum+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-keyword">import</span> &#123;ref,watch&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">  <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">  <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span>
<span class="language-javascript">  <span class="hljs-comment">// 方法</span></span>
<span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeSum</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">    sum.<span class="hljs-property">value</span> += <span class="hljs-number">1</span></span>
<span class="language-javascript">  &#125;</span>
<span class="language-javascript">  <span class="hljs-comment">// 监视，情况一：监视【ref】定义的【基本类型】数据</span></span>
<span class="language-javascript">  <span class="hljs-keyword">const</span> stopWatch = <span class="hljs-title function_">watch</span>(sum,<span class="hljs-function">(<span class="hljs-params">newValue,oldValue</span>)=&gt;</span>&#123;</span>
<span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span>
<span class="language-javascript">    <span class="hljs-comment">//当sum的值达到10后，停止对sum的监控</span></span>
<span class="language-javascript">    <span class="hljs-keyword">if</span>(newValue &gt;= <span class="hljs-number">10</span>)&#123;</span>
<span class="language-javascript">      <span class="hljs-title function_">stopWatch</span>()</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><p>情况二：监视<code>ref</code>定义的【对象类型】数据</p><p>直接写数据名，监视的是对象的<u>地址值</u>，若想监视对象内部属性，要手动开启深度监视。</p><p>开启深度监视：在watch函数的配置对象中设置<code>deep: true</code></p><div class="note note-warning"><ul><li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p></li><li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p></li></ul></div><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;car&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>情况二：监视【ref】定义的【对象类型】数据<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeBrand&quot;</span>&gt;</span>修改车的品牌<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeCar&quot;</span>&gt;</span>换辆车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Car&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">    </span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> car = <span class="hljs-title function_">ref</span>(&#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奔驰&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> &#125;);</span>
<span class="language-javascript">	</span>
<span class="language-javascript">    <span class="hljs-comment">//修改对象属性</span></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeBrand</span>(<span class="hljs-params"></span>) &#123; </span>
<span class="language-javascript">        car.<span class="hljs-property">value</span>.<span class="hljs-property">brand</span> = <span class="hljs-string">&quot;宝马&quot;</span>;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-comment">//修改对象地址</span></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        car.<span class="hljs-property">value</span> = &#123; <span class="hljs-attr">brand</span>: <span class="hljs-string">&quot;奥迪&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">200</span> &#125;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">	<span class="hljs-comment">//监视，情况二：监视【ref】定义的【对象类型】数据</span></span>
<span class="language-javascript">    <span class="hljs-title function_">watch</span>(car, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> &#123;</span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;car对象被修改了&quot;</span>, val); <span class="hljs-comment">//只关心最新值</span></span>
<span class="language-javascript">    &#125;, &#123; <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><p>情况三：监视<code>reactive</code>定义的【对象类型】数据</p><p>直接使用数据名，且自动开启了深度监视，无法关闭。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>情况三：监视【reactive】定义的【对象类型】数据<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changePerson&quot;</span>&gt;</span>修改整个人<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-keyword">import</span> &#123;reactive,watch&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">  <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">  <span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;</span>
<span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;张三&#x27;</span>,</span>
<span class="language-javascript">    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span></span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript">  <span class="hljs-comment">// 方法</span></span>
<span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">    person.<span class="hljs-property">name</span> += <span class="hljs-string">&#x27;~&#x27;</span></span>
<span class="language-javascript">  &#125;</span>
<span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">changePerson</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(person,&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;李四&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">80</span>&#125;)</span>
<span class="language-javascript">  &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-comment">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span></span>
<span class="language-javascript">  <span class="hljs-title function_">watch</span>(person,<span class="hljs-function">(<span class="hljs-params">val</span>)=&gt;</span>&#123;</span>
<span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;person变化了&#x27;</span>,val)</span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><p>情况四：监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong></p><ol type="1"><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li><li>若该属性值是<strong>依然</strong>是【对象类型】，可直接用，也可写成函数，<strong>建议写成函数。</strong></li></ol><div class="note note-primary"><p>返回一个值的函数可简写为：<code>() =&gt; xxxx</code></p><p>最佳实践：监视的要是对象的属性，最好写函数式。若属性是对象类型，则监视的是地址值，当要关注对象内部时，再手动开启深度监视。</p></div><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeC1&quot;</span>&gt;</span>修改第一台车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeCar&quot;</span>&gt;</span>修改整个车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; reactive, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;</span>
<span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>,</span>
<span class="language-javascript">        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span>
<span class="language-javascript">        <span class="hljs-attr">car</span>: &#123;</span>
<span class="language-javascript">            <span class="hljs-attr">c1</span>: <span class="hljs-string">&#x27;奔驰&#x27;</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">c2</span>: <span class="hljs-string">&#x27;宝马&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">    &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;李四&#x27;</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeC1</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">car</span>.<span class="hljs-property">c1</span> = <span class="hljs-string">&#x27;奥迪&#x27;</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">car</span> = &#123;</span>
<span class="language-javascript">            <span class="hljs-attr">c1</span>: <span class="hljs-string">&#x27;大众&#x27;</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">c2</span>: <span class="hljs-string">&#x27;福特&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">//监视基本类型的属性</span></span>
<span class="language-javascript">    <span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">name</span>, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;</span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;name变化了&#x27;</span>, newVal, oldVal);</span>
<span class="language-javascript">    &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">//监视对象类型的属性，若需要关注其内部的变化，则手动开启深度监视</span></span>
<span class="language-javascript">    <span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">car</span>, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;</span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;car变化了&#x27;</span>, newVal, oldVal);</span>
<span class="language-javascript">    &#125;, &#123; <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;) <span class="hljs-comment">//深度监视</span></span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><p>情况五：同时监视上述的多个数据</p><p>将要监控的数据源放入数组中，此时回调函数的参数<code>newVal</code>和<code>oldVal</code>中只包含要监控的属性内容。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeC1&quot;</span>&gt;</span>修改第一台车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeCar&quot;</span>&gt;</span>修改整个车<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; reactive, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">    <span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;</span>
<span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>,</span>
<span class="language-javascript">        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span>
<span class="language-javascript">        <span class="hljs-attr">car</span>: &#123;</span>
<span class="language-javascript">            <span class="hljs-attr">c1</span>: <span class="hljs-string">&#x27;奔驰&#x27;</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">c2</span>: <span class="hljs-string">&#x27;宝马&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">    &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeName</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;李四&#x27;</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeC1</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">car</span>.<span class="hljs-property">c1</span> = <span class="hljs-string">&#x27;奥迪&#x27;</span></span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCar</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">        person.<span class="hljs-property">car</span> = &#123;</span>
<span class="language-javascript">            <span class="hljs-attr">c1</span>: <span class="hljs-string">&#x27;大众&#x27;</span>,</span>
<span class="language-javascript">            <span class="hljs-attr">c2</span>: <span class="hljs-string">&#x27;福特&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">	<span class="hljs-comment">// 监视，情况五：监视上述的多个数据</span></span>
<span class="language-javascript">    <span class="hljs-comment">//注意：此时的newVal和oldVal中只包含name和car属性</span></span>
<span class="language-javascript">    <span class="hljs-title function_">watch</span>([<span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">name</span>, <span class="hljs-function">() =&gt;</span> person.<span class="hljs-property">car</span>], <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> &#123;</span>
<span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;监听到数据变化了&#x27;</span>, newVal, oldVal);</span>
<span class="language-javascript">    &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h3 id="watcheffect">4.6 watchEffect</h3><p>立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行。</p><p><code>watch</code>与<code>watchEffect</code></p><ol type="1"><li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p></li><li><p><code>watch</code>：要明确指出监视的数据</p></li><li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p></li></ol><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>需求：水温达到50℃，或水位达到20cm，则联系服务器<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>水温：&#123;&#123;temp&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>水位：&#123;&#123;height&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changePrice&quot;</span>&gt;</span>水温+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeSum&quot;</span>&gt;</span>水位+10<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-keyword">import</span> &#123;ref,watch,watchEffect&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">  <span class="hljs-comment">// 数据</span></span>
<span class="language-javascript">  <span class="hljs-keyword">let</span> temp = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span>
<span class="language-javascript">  <span class="hljs-keyword">let</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span>
<span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-comment">// 方法</span></span>
<span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">changePrice</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">    temp.<span class="hljs-property">value</span> += <span class="hljs-number">10</span></span>
<span class="language-javascript">  &#125;</span>
<span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeSum</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">    height.<span class="hljs-property">value</span> += <span class="hljs-number">1</span></span>
<span class="language-javascript">  &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-comment">// 用watch实现，需要明确的指出要监视：temp、height</span></span>
<span class="language-javascript">  <span class="hljs-title function_">watch</span>([temp,height],<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>&#123;</span>
<span class="language-javascript">    <span class="hljs-comment">// 从value中获取最新的temp值、height值</span></span>
<span class="language-javascript">    <span class="hljs-keyword">const</span> [newTemp,newHeight] = value</span>
<span class="language-javascript">    <span class="hljs-comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span>
<span class="language-javascript">    <span class="hljs-keyword">if</span>(newTemp &gt;= <span class="hljs-number">50</span> || newHeight &gt;= <span class="hljs-number">20</span>)&#123;</span>
<span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;联系服务器&#x27;</span>)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript"></span>
<span class="language-javascript">  <span class="hljs-comment">// 用watchEffect实现，用到哪些就监视哪些</span></span>
<span class="language-javascript">  <span class="hljs-keyword">const</span> stopWtach = <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">()=&gt;</span>&#123;</span>
<span class="language-javascript">    <span class="hljs-comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span>
<span class="language-javascript">    <span class="hljs-keyword">if</span>(temp.<span class="hljs-property">value</span> &gt;= <span class="hljs-number">50</span> || height.<span class="hljs-property">value</span> &gt;= <span class="hljs-number">20</span>)&#123;</span>
<span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;demo&#x27;</span>)?.<span class="hljs-property">innerText</span>)</span>
<span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;联系服务器&#x27;</span>)</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">    <span class="hljs-comment">// 水温达到100，或水位达到50，取消监视</span></span>
<span class="language-javascript">    <span class="hljs-keyword">if</span>(temp.<span class="hljs-property">value</span> === <span class="hljs-number">100</span> || height.<span class="hljs-property">value</span> === <span class="hljs-number">50</span>)&#123;</span>
<span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;清理了&#x27;</span>)</span>
<span class="language-javascript">      <span class="hljs-title function_">stopWtach</span>()</span>
<span class="language-javascript">    &#125;</span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h3 id="标签的ref属性">4.7 标签的ref属性</h3><p>在Vue3中，标签的ref属性用于<strong>获取对 DOM 元素或组件实例的直接引用</strong>。</p><p>在组合式API中，通常使用ref函数来创建一个响应式引用，然后将它绑定到模板中的ref属性上。这样，我们就可以在组件挂载后访问和操作 DOM 元素或子组件。</p><p>基本用法：</p><ol type="1"><li>在setup函数中，使用ref函数创建一个ref对象，初始值为null。</li><li>在模板中，将ref对象绑定到标签的ref属性上。</li><li>当组件挂载后，该ref对象的值会自动设置为对应的DOM元素或组件实例。</li></ol><p>获取DOM元素引用</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- country.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123; counryName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span>测试<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;country&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"><span class="hljs-keyword">let</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)</span>
<span class="language-javascript"><span class="hljs-keyword">let</span> country = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;中国&quot;</span>)</span>
<span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(title.<span class="hljs-property">value</span>) <span class="hljs-comment">//&lt;h1&gt;中国&lt;/h1&gt;</span></span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><p>获取组件实例引用</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 父组件App.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Country</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;country&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span>测试<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Country</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Person.vue&#x27;</span>;</span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">let</span> country = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">    <span class="hljs-comment">//获取子组件的实例</span></span>
<span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(country.<span class="hljs-property">value</span>); <span class="hljs-comment">//*Proxy(Object)* *&#123;__v_skip: true&#125;*</span></span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><p>默认情况下，父组件拿不到子组件中的具体数据，这是一种保护措施。需要子组件通过宏函数<code>defineExpose</code>指定想暴露哪些数据给父组件</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title function_">defineExpose</span>(countryName,...)</code></pre></div><h3 id="props">4.8 props</h3><p>props 是 Vue 组件之间<strong>数据传递</strong>的主要方式，用于父组件向子组件传递数据。在父组件中通过属性传递数据给子组件，在子组件中通过<code>defineProps</code> 宏函数来定义 props， 之后可以直接在模板中使用或进一步处理。</p><h4 id="父组件传递props">父组件传递props</h4><p>在父组件中，通过属性传递数据给子组件。</p><ul><li><p>静态传递</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 静态传递字符串，子组件得到：&quot;静态标题&quot;,&quot;0&quot;, &quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;--&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;静态标题&quot;</span> <span class="hljs-attr">count</span>=<span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;</span> /&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></code></pre></div></li><li><p>动态传递</p><p>在Vue模板中，属性前加冒号<code>:</code>表示动态绑定，是v-bind指令的简写形式。将属性值作为JavaScript表达式处理，可以传递任意类型的数据。不加冒号则表示静态绑定，属性值总是字符串。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 静态传递字符串，子组件得到：&quot;动态标题&quot;,0, [&#x27;a&#x27;, &#x27;b&#x27;]--&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;动态标题&quot;</span> <span class="hljs-attr">:count</span>=<span class="hljs-string">&quot;dynamicCount&quot;</span> <span class="hljs-attr">:items</span>=<span class="hljs-string">&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>= <span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript">    <span class="hljs-keyword">const</span> dynamicCount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">5</span>)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></li></ul><h4 id="定义props">定义props</h4><p>在子组件中使用<code>defineProps</code> 定义props。</p><p>方式一：数组形式 - 只定义名称，不指定类型</p><div class="code-wrapper"><pre><code class="hljs js">&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span> name=<span class="hljs-string">&quot;Child&quot;</span>&gt;
	<span class="hljs-keyword">let</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;count&#x27;</span>, <span class="hljs-string">&#x27;items&#x27;</span>])    
&lt;/script&gt;</code></pre></div><hr><p>方式二：对象形式，支持类型验证</p><p>Vue 允许对 props 进行验证，包括类型检查、必填检查、默认值、自定义验证函数等。</p><div class="spoiler collapsed"><div class="spoiler-title">通过 TypeScript 类型注解进行类型验证</div><div class="spoiler-content"><p>TypeScript 类型注解给变量、函数参数、函数返回值等添加类型信息，帮助在开发阶段进行类型检查，避免运行时类型错误。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//1、基本类型注解</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: string = <span class="hljs-string">&#x27;Tom&#x27;</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">age</span>: number = <span class="hljs-number">25</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">isStudent</span>: boolean = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">nullValue</span>: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">undefinedValue</span>: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">//2、数组和元组</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">list</span>: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-attr">list2</span>: <span class="hljs-title class_">Array</span>&lt;number&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// 泛型语法</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">tuple</span>: [string, number] = [<span class="hljs-string">&#x27;hello&#x27;</span>, <span class="hljs-number">10</span>]; <span class="hljs-comment">// 元组：已知元素数量和类型的数组</span>

<span class="hljs-comment">//3、接口</span>
    <span class="hljs-comment">//定义对象的结构</span>
    interface <span class="hljs-title class_">Person</span> &#123;
        <span class="hljs-attr">name</span>: string;
        <span class="hljs-attr">age</span>: number;
        email?: string; <span class="hljs-comment">// 属性名末尾加?，表示可选属性</span>
    &#125;
    <span class="hljs-comment">//指定对象结构为Person，当属性名或属性类型与定义不匹配时会提示错误信息</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">person</span>: <span class="hljs-title class_">Person</span> = &#123;  
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Tom&#x27;</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
    &#125;;
       
<span class="hljs-comment">//4、类型别名（Type Alias）</span>
    <span class="hljs-comment">//类型别名可以给一个类型起个新名字，也可以用于联合类型等复杂类型。</span>
    type <span class="hljs-title class_">StringOrNumber</span> = string | number;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-title class_">StringOrNumber</span> = <span class="hljs-string">&#x27;hello&#x27;</span>;
    value = <span class="hljs-number">123</span>; 
    
<span class="hljs-comment">//5、函数类型注解</span>
    <span class="hljs-comment">// 函数声明，指定参数和返回值类型</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: number, y: number</span>): number &#123;
        <span class="hljs-keyword">return</span> x + y;
    &#125;
<span class="hljs-comment">//6、类型断言 as</span>
    <span class="hljs-comment">//类型断言可以用来手动指定一个值的类型。</span>
    <span class="hljs-comment">//类型断言不是类型转换，它只是在编译阶段告诉编译器如何分析类型。</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">someValue</span>: any = <span class="hljs-string">&quot;this is a string&quot;</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">strLength</span>: number = (someValue <span class="hljs-keyword">as</span> string).<span class="hljs-property">length</span>;</code></pre></div></div></div><div class="code-wrapper"><pre><code class="hljs js">
&lt;script setup lang=<span class="hljs-string">&quot;ts&quot;</span> name=<span class="hljs-string">&quot;Child&quot;</span>&gt;
<span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-comment">//</span>
    
&lt;/script&gt;</code></pre></div><h4 id="使用props">使用props</h4><p>props对象结构如下，它是一个Proxy对象，从它的数据中可以得出：父组件传递的响应式数据，在子组件中会变成普通数据。</p><p>因此，Props 是单向的，父组件的变化会向下流动到子组件，但反过来不行。如果需要在子组件中修改，需要采用其他方式，见下文【组件通信】的内容。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251005232322763-2025-10-523:25:54.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="props对象结构" style="zoom:80%"></p><h3 id="自定义hook">4.9 自定义hook</h3><p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，将相关的逻辑代码组织在一起。这些函数可以返回响应式数据、方法、计算属性等，以便在多个组件中复用。</p><p>自定义<code>hook</code>的优势：</p><ul><li><strong>逻辑复用</strong>：在不同的组件中复用相同的逻辑。</li><li><strong>代码组织</strong>：将相关的逻辑代码组织在一起，使组件更易于维护。</li><li><strong>逻辑分离</strong>：将复杂的组件逻辑拆分成更小、更专注的函数。</li></ul><hr><p>自定义hook基本步骤：</p><ol type="1"><li>创建一个ts文件，文件名通常<strong>以 <code>use</code> 为前缀</strong>，在其中创建相同名字的hook函数</li><li>在函数内部使用组合式 API来封装逻辑。</li><li>返回一个对象，包含所有需要暴露的响应式数据和方法，方便在组件中解构使用。</li></ol><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//useSum.ts</span>
<span class="hljs-keyword">import</span> &#123; ref, onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-comment">//带参数的hook函数</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useSum</span>(<span class="hljs-params">initialValue: number = <span class="hljs-number">0</span></span>) &#123;
  <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(initialValue)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; &#123;
    sum.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>
  &#125;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"></span>) =&gt; &#123;
    sum.<span class="hljs-property">value</span> -= <span class="hljs-number">1</span>
  &#125;
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-title function_">increment</span>() <span class="hljs-comment">//组件挂载时，初始值为1</span>
  &#125;)

  <span class="hljs-comment">//向外部暴露数据</span>
  <span class="hljs-keyword">return</span> &#123; sum, increment, decrement &#125;
&#125;</code></pre></div><hr><p>使用hook：</p><ul><li>引入hook函数</li><li>调用hook函数并解构返回内容</li></ul><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;person&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>当前和为: &#123;&#123; sum &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>加1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;decrement&quot;</span>&gt;</span>减1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">//引入hook函数</span></span>
<span class="language-javascript">    <span class="hljs-keyword">import</span> &#123; useSum &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/hooks/useSum&#x27;</span>;</span>
<span class="language-javascript">	<span class="hljs-comment">//调用hook函数并解构返回内容</span></span>
<span class="language-javascript">    <span class="hljs-keyword">const</span> &#123; sum, increment, decrement &#125; = <span class="hljs-title function_">useSum</span>(<span class="hljs-number">10</span>);</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h2 id="五生命周期">五、生命周期</h2><p><code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p><p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p><p><code>Vue2</code>的生命周期：</p><ul><li>创建阶段：<code>beforeCreate</code>、<code>created</code></li><li>挂载阶段：<code>beforeMount</code>、<code>mounted</code></li><li>更新阶段：<code>beforeUpdate</code>、<code>updated</code></li><li>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></li></ul><p><code>Vue3</code>的生命周期：</p><ul><li><p>创建阶段：<code>setup</code></p></li><li><p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p></li><li><p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p></li><li><p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p></li></ul><p>生命周期钩子详情：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/composition-api-lifecycle">组合式 API：生命周期钩子</a></p><p>还有其他一些钩子，会在实例生命周期的不同阶段被调用，最常用的是 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/composition-api-lifecycle.html#onmounted"><code>onMounted</code></a>、<a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/composition-api-lifecycle.html#onupdated"><code>onUpdated</code></a> 和 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/composition-api-lifecycle.html#onunmounted"><code>onUnmounted</code></a>。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/lifecycle_zh-CN.W0MNXI0C-2025-10-417:04:55.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="lifecycle" style="zoom:80%"></p><h2 id="六路由">六、路由</h2><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251004175922561-2025-10-417:59:38.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><ul><li>路由就是<strong>一组key-value的对应关系。</strong>它建立了 URL 与应用程序中特定组件或视图之间的映射关系。</li><li>多个路由，需要经过路由器的管理。</li></ul><p>在 Vue 中，路由是构建单页面应用（SPA）的重要组成部分。在 SPA 中，整个应用只有一个HTML页面。路由允许我们在不重新加载页面的情况下切换视图，提供更快的用户体验。</p><p>例如，当点击班级管理时，页面URL发生改变，路由器拦截页面跳转请求，根据路由规则找到目标URL对应的组件，最后将其挂载到显示区域。</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20231018144351536-2025-10-418:12:17.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><h3 id="一个单页面应用">6.1 一个单页面应用</h3><p>通过一个单页面应用案例学习路由的基本使用，步骤如下：</p><ol type="1"><li>确定导航区和展示区</li><li>编写相关页面组件</li><li>创建并使用路由器</li><li>制定路由规则</li><li>挂载组件到页面</li></ol><hr><p>导航区有三个<code>&lt;a&gt;</code>标签：首页、新闻和关于，作为不同的页面。在其下面有一个区域用于展示对应组件。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>Vue路由测试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 导航区 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navigate&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/news&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>新闻<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>关于<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 展示区 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-content&quot;</span>&gt;</span>
			此处展示对应页面组件
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><div class="spoiler collapsed"><div class="spoiler-title">相关样式</div><div class="spoiler-content"><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-comment">/* App */</span>
<span class="hljs-selector-class">.title</span> &#123;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">word-spacing</span>: <span class="hljs-number">5px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">30px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">70px</span>;
    <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, gray, white);
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
&#125;

<span class="hljs-selector-class">.navigate</span> &#123;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-around;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">100px</span>;
&#125;

<span class="hljs-selector-class">.navigate</span> <span class="hljs-selector-tag">a</span> &#123;
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">90px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">background-color</span>: gray;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">5px</span>;
&#125;

<span class="hljs-selector-class">.navigate</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.active</span> &#123;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#64967E</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffc268</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">900</span>;
    <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1px</span> black;
    <span class="hljs-attribute">font-family</span>: 微软雅黑;
&#125;

<span class="hljs-selector-class">.main-content</span> &#123;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid;
&#125;</code></pre></div></div></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251004184005764-2025-10-418:40:11.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><p>创建三个页面对应的component组件。路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p><div class="spoiler collapsed"><div class="spoiler-title">页面组件</div><div class="spoiler-content"><p>首页：</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://catpaws.top/blog-resource/imgs/reply.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-class">.home</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">display</span>: flex;</span>
<span class="language-css">  <span class="hljs-attribute">justify-content</span>: center;</span>
<span class="language-css">  <span class="hljs-attribute">align-items</span>: center;</span>
<span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-tag">img</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><p>新闻页：</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>新闻001<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>新闻002<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>新闻003<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>新闻004<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;News&quot;</span>&gt;</span>
  
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span>
<span class="language-css"><span class="hljs-comment">/* 新闻 */</span></span>
<span class="language-css"><span class="hljs-selector-class">.news</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span>
<span class="language-css">  <span class="hljs-attribute">display</span>: flex;</span>
<span class="language-css">  <span class="hljs-attribute">justify-content</span>: space-between;</span>
<span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"><span class="hljs-selector-class">.news</span> <span class="hljs-selector-tag">ul</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;</span>
<span class="language-css">  <span class="hljs-attribute">list-style</span>: none;</span>
<span class="language-css">  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"><span class="hljs-selector-class">.news</span> <span class="hljs-selector-tag">li</span>&gt;<span class="hljs-selector-tag">a</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span>
<span class="language-css">  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;</span>
<span class="language-css">  <span class="hljs-attribute">text-decoration</span>: none;</span>
<span class="language-css">  <span class="hljs-attribute">color</span>: <span class="hljs-number">#64967E</span>;</span>
<span class="language-css">  <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span>, <span class="hljs-number">84</span>, <span class="hljs-number">0</span>);</span>
<span class="language-css">&#125;</span>
<span class="language-css"><span class="hljs-selector-class">.news-content</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">70%</span>;</span>
<span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">90%</span>;</span>
<span class="language-css">  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid;</span>
<span class="language-css">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span>
<span class="language-css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><p></p><p>关于页：</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;about&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>大家好，欢迎来到尚硅谷直播间<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;About&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-class">.about</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">display</span>: flex;</span>
<span class="language-css">  <span class="hljs-attribute">justify-content</span>: center;</span>
<span class="language-css">  <span class="hljs-attribute">align-items</span>: center;</span>
<span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>
<span class="language-css">  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">85</span>, <span class="hljs-number">84</span>, <span class="hljs-number">84</span>);</span>
<span class="language-css">  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div></div></div><hr><p>在Vue中使用 Vue Router 来实现路由，首先安装路由依赖：</p><div class="code-wrapper"><pre><code class="hljs powershell">npm i vue<span class="hljs-literal">-router</span></code></pre></div><p>按照工程规范路由器定义在router目录下。</p><div class="code-wrapper"><pre><code class="hljs javascript">src
 |-- router
      |-- index.<span class="hljs-property">ts</span></code></pre></div><p>使用<code>createRouter</code>方法创建路由器，在创建时要配置路由规则并指定路由器的工作模式</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//index.ts</span>
<span class="hljs-comment">// 引入 createRouter 函数</span>
<span class="hljs-keyword">import</span> &#123; createRouter, createMemoryHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>

<span class="hljs-comment">//引入可能呈现的组件</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Home.vue&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/News.vue&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/About.vue&#x27;</span>

<span class="hljs-comment">// 创建路由对象</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;
  <span class="hljs-comment">//配置路由规则（是一个数组，其中包含多个对象）</span>
  <span class="hljs-attr">routes</span>: [
    &#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>,
    &#125;,
    &#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,
    &#125;,
    &#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>,
    &#125;,
    &#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,
      <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span>, <span class="hljs-comment">//重定向</span>
    &#125;,
  ],
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createMemoryHistory</span>(), <span class="hljs-comment">//设置路由器的工作模式</span>
&#125;)

<span class="hljs-comment">// 导出路由对象</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre></div><p>在<code>main.ts</code>中引入路由器对象</p><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>

<span class="hljs-comment">// 引入路由对象</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
<span class="hljs-comment">// 使用用路由对象</span>
app.<span class="hljs-title function_">use</span>(router)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)
</code></pre></div><hr><ul><li><p>使用<code>RouterView</code>将所跳转页面的组件渲染到展示区域。</p></li><li><p>使用<code>RouterLink</code>代替原来的<code>&lt;a&gt;</code>标签进行跳转，跳转路径写在<code>to</code>属性中</p></li></ul><p>to的字符串写法：直接写路径字符串，看上去简单，但当需要传递参数时需要进行字符串拼接，十分繁琐</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>主页<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>
</code></pre></div><p>to的对象写法：内容是一个对象，跳转路径定义在<code>path</code>属性中，结构清晰，传递参数简单</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--注意：to前有`:`，内部的路径字符串用单引号--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></code></pre></div><div class="note note-info"><p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p></div><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>Vue路由测试<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 导航区 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navigate&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/news&quot;</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>新闻<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>关于<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 展示区 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-content&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">RouterView</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">    <span class="hljs-comment">//引入RouterView和RouterLink</span></span>
<span class="language-javascript">	<span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">RouterView</span>, <span class="hljs-title class_">RouterLink</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>略<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><h3 id="路由器相关的补充">6.2 路由器相关的补充</h3><p>路由器的工作模式</p><p><code>history</code>模式</p><ul><li><p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p></li><li><p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;
	<span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHistory</span>(), <span class="hljs-comment">//history模式</span>
	<span class="hljs-comment">/******/</span>
&#125;)</code></pre></div></li></ul><hr><p><code>hash</code>模式</p><ul><li><p>优点：兼容性更好，因为不需要服务器端处理路径。</p></li><li><p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;
	<span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHashHistory</span>(), <span class="hljs-comment">//hash模式</span>
	<span class="hljs-comment">/******/</span>
&#125;)</code></pre></div></li></ul><hr><p>路由器的 replace 属性</p><ol type="1"><li><p>作用：控制路由跳转时操作浏览器历史记录的模式。</p></li><li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p><ul><li><code>push</code>是追加历史记录（默认值）。</li><li><code>replace</code>是替换当前记录。</li></ul></li><li><p>开启<code>replace</code>模式：</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</code></pre></div></li></ol><h3 id="命名路由">6.3 命名路由</h3><p>命名路由可以简化路由跳转及传参</p><p>在路由规则中通过<code>name</code>属性为路由命名</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-attr">routes</span>:[
  &#123;
    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhuye&#x27;</span>,
    <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,
    <span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span>
  &#125;
]</code></pre></div><p>直接通过名字跳转，需要to的对象写法配合name属性使用</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;name:&#x27;zhuye&#x27;&#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span></code></pre></div><h3 id="嵌套路由">6.4 嵌套路由</h3><p>在一条路由规则中，在<code>childern</code>属性中定义子路由</p><div class="code-wrapper"><pre><code class="hljs js">&#123;
  <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhuye&#x27;</span>,
  <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,
  <span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span>,
  <span class="hljs-attr">childern</span>: [
      &#123;
          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;live&#x27;</span> <span class="hljs-comment">//子路由前面不用加`/`</span>
          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Live</span>
      &#125;,
      &#123;
          <span class="hljs-comment">//其他子路由</span>
      &#125;
  ]
&#125;</code></pre></div><hr><p>新增需求：在New页面，当点击其中一条新闻时，在其内部展示新闻详情。这时候每条新闻变成了导航区的内容，需要再创建一个组件来显示对应新闻的内容。</p><div class="spoiler collapsed"><div class="spoiler-title">新增Detail.vue</div><div class="spoiler-content"><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news-list&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>编号：xxx<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>标题：xxx<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>内容：xxx<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;About&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span>
<span class="language-css">  <span class="hljs-selector-class">.news-list</span> &#123;</span>
<span class="language-css">    <span class="hljs-attribute">list-style</span>: none;</span>
<span class="language-css">    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">20px</span>;</span>
<span class="language-css">  &#125;</span>
<span class="language-css"></span>
<span class="language-css">  <span class="hljs-selector-class">.news-list</span>&gt;<span class="hljs-selector-tag">li</span> &#123;</span>
<span class="language-css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;</span>
<span class="language-css">  &#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div></div></div><p>配置新闻页面的子路由</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Detail.vue&#x27;</span>
<span class="hljs-attr">routes</span>: [
    &#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,
      <span class="hljs-attr">children</span>: [
        &#123;
          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail&#x27;</span>,
          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span>,
        &#125;,
      ],
    &#125;,
    <span class="hljs-comment">//其他路由信息略</span>
  ],</code></pre></div><p>修改<code>News.vue</code>组件，添加<code>RouterLinke</code>和<code>RouterView</code></p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 导航区 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;news in newsList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;news.id&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/news/detail&quot;</span>&gt;</span>&#123;&#123; news.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 展示区 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news-content&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">RouterView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;News&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">RouterView</span>, <span class="hljs-title class_">RouterLink</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">const</span> newsList = <span class="hljs-title function_">reactive</span>([</span>
<span class="language-javascript">  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;asfdtrfay01&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;很好的抗癌食物&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;西蓝花&#x27;</span> &#125;,</span>
<span class="language-javascript">  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;asfdtrfay02&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;如何一夜暴富&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;学IT&#x27;</span> &#125;,</span>
<span class="language-javascript">  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;asfdtrfay03&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;震惊，万万没想到&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;明天是周一&#x27;</span> &#125;,</span>
<span class="language-javascript">  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;asfdtrfay04&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;好消息！好消息！&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;快过年了&#x27;</span> &#125;</span>
<span class="language-javascript">])</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251004203748962-2025-10-420:37:49.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:80%"></p><p>由于在<code>Detail.vue</code>中的内容是写死的，点击每条新闻都只能显示固定的内容。若要显示特定的新闻详情，需要涉及到路由传参。</p><h3 id="路由传参">6.5 路由传参</h3><p>路由传参主要有以下几种方式：</p><ol type="1"><li>通过查询参数（query）传参</li><li>通过动态路由参数（params）传参</li><li>通过props传参</li><li>通过路由元信息（meta）传参</li><li>通过编程式路由传参</li></ol><p>使用<code>useRoute</code>这个hook函数接收路由参数，</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;

<span class="hljs-keyword">let</span> route = <span class="hljs-title function_">useRoute</span>() <span class="hljs-comment">//调用useRoute</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route);

<span class="hljs-comment">//假设已经传递了想要的参数</span>
<span class="hljs-comment">//读取query参数</span>
<span class="hljs-keyword">let</span> id = route.<span class="hljs-property">query</span>.<span class="hljs-property">id</span>
<span class="hljs-keyword">let</span> name = route.<span class="hljs-property">query</span>.<span class="hljs-property">name</span>

<span class="hljs-comment">//读取param参数</span>
<span class="hljs-keyword">let</span> id = route.<span class="hljs-property">param</span>.<span class="hljs-property">id</span>
<span class="hljs-keyword">let</span> name = route.<span class="hljs-property">param</span>.<span class="hljs-property">name</span></code></pre></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251004211241951-2025-10-421:12:43.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="useRoute函数的返回值" style="zoom:80%"></p><p>当点击一条新闻时，尝试使用以上三种方式将新闻的参数通过路由传递给<code>Detail</code>组件</p><h4 id="query传参">query传参</h4><p>直接在URL后面以<code>?key=value</code>的形式传递。</p><p>格式：<code>/path?key1=value1&amp;key2=value2</code></p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- to的字符串写法  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/news/detail?id=$&#123;news.id&#125;&amp;title=$&#123;news.title&#125;&amp;content=$&#123;news.content&#125;`&quot;</span>&gt;</span>&#123;&#123; news.title &#125;&#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>

<span class="hljs-comment">&lt;!-- to的对象写法  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;</span></span>
<span class="hljs-string"><span class="hljs-tag">  path: &#x27;/news/detail&#x27;,</span></span>
<span class="hljs-string"><span class="hljs-tag">  query: &#123;</span></span>
<span class="hljs-string"><span class="hljs-tag">    id: news.id,</span></span>
<span class="hljs-string"><span class="hljs-tag">    title: news.title,</span></span>
<span class="hljs-string"><span class="hljs-tag">    content: news.content</span></span>
<span class="hljs-string"><span class="hljs-tag">  &#125;</span></span>
<span class="hljs-string"><span class="hljs-tag">&#125;&quot;</span>&gt;</span>&#123;&#123; news.title &#125;&#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span></code></pre></div><p>在<code>Detail.vue</code>组件中接收参数</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news-list&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>编号：&#123;&#123; route.query.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>标题：&#123;&#123; route.query.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>内容：&#123;&#123; route.query.content &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;About&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span>
<span class="language-javascript"><span class="hljs-keyword">let</span> route = <span class="hljs-title function_">useRoute</span>()</span>
<span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route);</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><h4 id="param传参">param传参</h4><p>通过 URL 路径本身传递参数，适合<strong>必要参数</strong></p><p>格式：<code>/path/value1/value2</code></p><ul><li><p>传递<code>params</code>参数时，需要提前在路由规则中占位，例如：<code>path: /home/:id/:name?</code>。</p><ul><li>占位的都是必要参数，必须传。也可以在参数后加<code>?</code>表示该参数是可选的</li></ul></li><li><p>传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p></li><li><p>传递<code>params</code>参数时，不能传递对象或数组</p></li></ul><p>在路由中添加参数占位，并给路由命名</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-attr">routes</span>: [
    &#123;
        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,
        <span class="hljs-attr">children</span>: [
            &#123;
                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xiangqing&#x27;</span>, <span class="hljs-comment">//给路由命名</span>
                <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail/:id/:title/:content&#x27;</span>, <span class="hljs-comment">//使用占位符声明接受params参数</span>
                <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span>,
            &#125;,
        ],
    &#125;,
]</code></pre></div><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- to的字符串写法  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/news/detail/$&#123;news.id&#125;/$&#123;news.title&#125;/$&#123;news.content&#125;`&quot;</span>&gt;</span>&#123;&#123; news.title &#125;&#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>

<span class="hljs-comment">&lt;!-- to的对象写法  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123;</span></span>
<span class="hljs-string"><span class="hljs-tag">  name: &#x27;xiangqing&#x27;, //使用命名路由</span></span>
<span class="hljs-string"><span class="hljs-tag">  params: &#123;</span></span>
<span class="hljs-string"><span class="hljs-tag">    id: news.id,</span></span>
<span class="hljs-string"><span class="hljs-tag">    title: news.title,</span></span>
<span class="hljs-string"><span class="hljs-tag">    content: news.content</span></span>
<span class="hljs-string"><span class="hljs-tag">  &#125;</span></span>
<span class="hljs-string"><span class="hljs-tag">&#125;&quot;</span>&gt;</span>&#123;&#123; news.title &#125;&#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span></code></pre></div><p>在<code>Detail.vue</code>组件中接收参数</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news-list&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>编号：&#123;&#123; route.params.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>标题：&#123;&#123; route.params.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>内容：&#123;&#123; route.params.content &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;About&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; toRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>    </span>
<span class="language-javascript">    </span>
<span class="language-javascript"><span class="hljs-keyword">let</span> route = <span class="hljs-title function_">useRoute</span>()</span>
<span class="language-javascript"><span class="hljs-keyword">const</span>&#123;id, title, content&#125; = <span class="hljs-title function_">toRefs</span>(route.<span class="hljs-property">query</span>)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><hr><h4 id="props传参">props传参</h4><p>将路由参数作为路由组件 props 传递</p><ol type="1"><li><p>将<strong>params</strong>参数作为路由组件的props传递。在路由配置中，设置props为true即可</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-attr">routes</span>: [
    &#123;
        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,
        <span class="hljs-attr">children</span>: [
            &#123;
                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xiangqing&#x27;</span>, <span class="hljs-comment">//给路由命名</span>
                <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail/:id/:title/:content&#x27;</span>, <span class="hljs-comment">//使用占位符声明接受params参数</span>
                <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span>,
                <span class="hljs-attr">props</span>: <span class="hljs-literal">true</span>   <span class="hljs-comment">//将路由参数映射到组件的props中</span>
            &#125;,
        ],
    &#125;,
]</code></pre></div></li><li><p>将<strong>query</strong>参数作为为路由组件的props传递。通过接收<code>route</code>对象，手动将其中的<code>query</code>对象返回，作为路由组件的props。</p><p>由于<code>route</code>对象中有当前路由的全部信息，包括<code>query</code>和<code>params</code>，理论上也能返回<code>params</code>对象，但使用第一种方法传递<code>params</code>参数更简单。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-attr">routes</span>: [
    &#123;
        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,
        <span class="hljs-attr">children</span>: [
            &#123;
                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xiangqing&#x27;</span>, <span class="hljs-comment">//给路由命名</span>
                <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail&#x27;</span>, 
                <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span>,
                <span class="hljs-title function_">props</span>(<span class="hljs-params">route</span>) &#123;
  					<span class="hljs-keyword">return</span> route.<span class="hljs-property">query</span>
				&#125;,
            &#125;,
        ],
    &#125;,
]</code></pre></div></li></ol><p>此时就不用<code>useRoute</code>接收参数了，可以直接通过<code>defineProps</code>接收传递props对象</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;news-list&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>编号：&#123;&#123; id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>标题：&#123;&#123; title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>内容：&#123;&#123; content &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;About&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">	<span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>]) <span class="hljs-comment">// 接收路由传递的参数</span></span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h4 id="meta传参">meta传参</h4><p>元信息可以用于在路由中附加一些自定义数据，这些数据可以在导航守卫或组件中访问。</p><p>在路由配置中定义meta</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [
  &#123;
    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;About&#x27;</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>,
    <span class="hljs-attr">meta</span>: &#123; <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;关于我们&#x27;</span> &#125;
  &#125;
]</code></pre></div><p>在组件中，可以通过useRoute获取meta。</p><div class="code-wrapper"><pre><code class="hljs js">&lt;script setup&gt;
<span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>

<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>) <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>) <span class="hljs-comment">// &#x27;关于我们&#x27;</span>
&lt;/script&gt;</code></pre></div><h3 id="编程式路由">6.6 编程式路由</h3><p>编程式路由允许在 js 代码中控制路由跳转，而不是依赖 <code>&lt;router-link&gt;</code> 组件。</p><p>主要通过 <code>useRouter</code> 钩子返回的 <code>router</code> 实例来实现，拿到了它就相当于拿到了路由器。之后可以通过调用 <code>router</code> 的方法来以编程的方式导航到不同的 URL。</p><p>主要的方法有：</p><ol type="1"><li><code>router.push</code>：导航到新 URL，向历史栈添加一条记录。</li><li><code>router.replace</code>：导航到新 URL，替换当前历史记录。</li><li><code>router.go</code>：在历史记录中前进或后退。</li><li><code>router.foward/back</code>：前进或后退一条记录，是 <code>router.go</code> 的便捷方法。</li></ol><p><code>router.push/replace</code>的参数与 <code>&lt;router-link&gt;</code> 中<code>to</code>属性的写法<strong>完全一样</strong>，可以是一个路由字符串，也可以是一个对象。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//需求：当在主页停留3s后跳转到新闻页面</span>
<span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;
<span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>; <span class="hljs-comment">//引入useRouter钩子</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>(); <span class="hljs-comment">//使用钩子获取router实例</span>

<span class="hljs-comment">//1、 与to属性的字符串写法写法相同</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-comment">//路由跳转</span>
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/news&#x27;</span>);
  &#125;, <span class="hljs-number">3000</span>);
&#125;);

<span class="hljs-comment">//2、 与to属性的对象写法相同</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-comment">//路由跳转</span>
    router.<span class="hljs-title function_">replace</span>(&#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/news&#x27;</span>,
      <span class="hljs-attr">query</span>:&#123;&#125;
    &#125;);
  &#125;, <span class="hljs-number">3000</span>);</code></pre></div><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 前进一条记录，与 router.forward() 相同</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>)
<span class="hljs-comment">// 后退一条记录，与 router.back() 相同</span>
router.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>)
<span class="hljs-comment">// 前进 3 条记录</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">3</span>)
<span class="hljs-comment">// 如果没有那么多记录，静默失败</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">100</span>)</code></pre></div><h3 id="路由守卫">6.7 路由守卫</h3><p>在 Vue 3 中，路由守卫是一种功能强大的机制，用于在路由发生变化时执行代码。它们主要用于权限验证、路由跳转控制等场景。Vue 3 提供了多种类型的路由守卫，包括<strong>全局守卫</strong>、<strong>路由独享守卫</strong>和<strong>组件内守卫</strong>。</p><h4 id="全局守卫">全局守卫</h4><p>全局守卫对所有路由都有效，可以在路由跳转发生前、后或过程中执行代码。</p><p>全局守卫包括：</p><ul><li><strong>beforeEach</strong>: 全局前置守卫，在路由跳转前被调用，可以用来进行权限验证或其他全局性的检查。</li><li><strong>afterEach</strong>: 全局后置守卫，在路由跳转后被调用，通常用于更新页面标题或执行分析代码。</li><li><strong>beforeResolve</strong>: 全局解析守卫，在路由跳转被确认之前，所有组件内守卫和异步路由组件解析完毕后被调用。</li></ul><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;
 <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
 <span class="hljs-attr">routes</span>: [...]
&#125;)
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
 <span class="hljs-comment">// 执行权限验证等操作，如用户身份验证</span>
 <span class="hljs-title function_">next</span>()
&#125;)
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;
 <span class="hljs-comment">// 执行跳转后的操作，如权限最终校验</span>
&#125;)
router.<span class="hljs-title function_">beforeResolve</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
 <span class="hljs-comment">// 在导航被确认之前的操作，如页面访问统计</span>
 <span class="hljs-title function_">next</span>()
&#125;)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router</code></pre></div><h4 id="路由独享守卫">路由独享守卫</h4><p>路由独享守卫只在特定路由上有效，可以在路由配置中直接定义，在进入特定路由前执行，对某个路由进行特定的处理。</p><p>路由独享守卫只有一个：<strong>beforeEnter</strong>：在路由进入前被调用，可以做页面访问控制等</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [
 &#123;
   <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/example&#x27;</span>,
   <span class="hljs-attr">component</span>: <span class="hljs-title class_">Example</span>,
   <span class="hljs-attr">beforeEnter</span>: <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
     <span class="hljs-comment">// 路由进入前的操作，如：付费内容访问控制</span>
     <span class="hljs-title function_">next</span>()
   &#125;
 &#125;
]</code></pre></div><h4 id="组件内守卫">组件内守卫</h4><p>组件内守卫允许在路由组件内部直接定义守卫。这些守卫可以访问组件实例，通常用于处理组件级的导航逻辑。</p><p>组件内守卫包含三个：</p><ul><li><strong>beforeRouteEnter</strong>：组件进入守卫，在渲染该组件的对应路由被验证前调用，可以做数据预加载</li><li><strong>beforeRouteUpdate</strong>：组件更新守卫，在当前路由改变，但是该组件被复用时调用</li><li><strong>beforeRouteLeave</strong>：组件离开守卫，在导航离开渲染该组件的对应路由时调用</li></ul><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;
 <span class="hljs-title function_">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) &#123;
   <span class="hljs-comment">// 在渲染该组件的对应路由被验证前调用，如数据预加载</span>
   <span class="hljs-title function_">next</span>()
 &#125;,
 <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) &#123;
   <span class="hljs-comment">// 在当前路由改变，但是该组件被复用时调用，如动态处理参数，商品详情页中切换不同商品ID时刷新数据。</span>
 &#125;,
 <span class="hljs-title function_">beforeRouteLeave</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) &#123;
   <span class="hljs-comment">// 在导航离开渲染该组件的对应路由时调用，如表单保存提示</span>
 &#125;
&#125;</code></pre></div><h4 id="next">next()</h4><p>在Vue Router中，<code>next</code>方法是路由守卫中的一个关键参数，它用于控制导航的行为。</p><p><code>next</code>方法的使用方式:</p><ol type="1"><li><p><code>next()</code>: 进行管道中的下一个钩子</p></li><li><p><code>next(false)</code>: 中断当前的导航。如果传入<code>false</code>，则导航会被中断，且重置到来自<code>from</code>的路由。</p></li><li><p><code>next('/')</code> 或者 <code>next(&#123; path: '/' &#125;)</code>: 重定向到指定路由。可以通过字符串路径或者路由位置对象重定向，同时传递参数。与<code>route.push</code>用法相同。</p></li><li><p><code>next(error)</code>：错误处理。如果传入一个<code>Error</code>实例，则导航会被终止，且该错误会被传递给<code>router.onError()</code>注册过的回调。</p></li></ol><p>注意：</p><ul><li>每个守卫必须调用一次且仅一次 <code>next</code>以允许路由跳转。</li><li>在异步操作完成后调用 <code>next</code></li><li>使用 <code>return</code> 确保在重定向后不会继续执行代码</li></ul><p>放行导航用法示例：</p><div class="code-wrapper"><pre><code class="hljs js">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
  <span class="hljs-comment">// 简单的条件检查后放行</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> !== <span class="hljs-string">&#x27;/restricted&#x27;</span>) &#123;
    <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 允许导航继续</span>
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-title function_">next</span>(<span class="hljs-string">&#x27;/login&#x27;</span>); <span class="hljs-comment">// 重定向</span>
  &#125;
&#125;);

router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-title function_">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; &#123;
  <span class="hljs-keyword">try</span> &#123;
    <span class="hljs-comment">// 执行异步检查</span>
    <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-title function_">validateAccess</span>(to);
    
    <span class="hljs-keyword">if</span> (isValid) &#123;
      <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 异步操作完成后放行</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-title function_">next</span>(<span class="hljs-string">&#x27;/access-denied&#x27;</span>);
    &#125;
  &#125; <span class="hljs-keyword">catch</span> (error) &#123;
    <span class="hljs-title function_">next</span>(<span class="hljs-string">&#x27;/error&#x27;</span>);
  &#125;
&#125;);</code></pre></div><p>中断导航用法示例：</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 在组件内的 beforeRouteLeave 守卫中使用</span>
<span class="hljs-title function_">beforeRouteLeave</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) &#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasUnsavedChanges</span>) &#123;
    <span class="hljs-comment">// 显示确认对话框</span>
    <span class="hljs-keyword">const</span> confirmLeave = <span class="hljs-title function_">confirm</span>(<span class="hljs-string">&#x27;您有未保存的更改，确定要离开吗？&#x27;</span>);
    
    <span class="hljs-keyword">if</span> (confirmLeave) &#123;
      <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 用户确认离开</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// 取消导航，停留在当前页面</span>
    &#125;
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 没有未保存更改，正常离开</span>
  &#125;
&#125;

<span class="hljs-comment">//条件中断</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;  
  <span class="hljs-comment">// 检查网络连接</span>
  <span class="hljs-keyword">if</span> (!navigator.<span class="hljs-property">onLine</span> &amp;&amp; to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresOnline</span>) &#123;
    <span class="hljs-title function_">showOfflineMessage</span>();
    <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// 中断导航</span>
    <span class="hljs-keyword">return</span>;
  &#125;
  <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 条件满足，继续导航</span>
&#125;);</code></pre></div><p>重定向导航用法示例：</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//字符串路径重定向</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
  <span class="hljs-comment">// 简单的路径重定向</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">&#x27;/old-path&#x27;</span>) &#123;
    <span class="hljs-title function_">next</span>(<span class="hljs-string">&#x27;/new-path&#x27;</span>); <span class="hljs-comment">// 重定向到新路径</span>
    <span class="hljs-keyword">return</span>;
  &#125;
  
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">&#x27;/&#x27;</span>) &#123;
    <span class="hljs-title function_">next</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>); <span class="hljs-comment">// 默认重定向</span>
    <span class="hljs-keyword">return</span>;
  &#125;
  
  <span class="hljs-title function_">next</span>();
&#125;);

<span class="hljs-comment">//路由位置对象重定向</span>

router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
  <span class="hljs-comment">// 未认证用户访问需要认证的页面</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">isAuthenticated</span>()) &#123;
    <span class="hljs-title function_">next</span>(&#123;
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,
      <span class="hljs-attr">query</span>: &#123;
        <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span>,    <span class="hljs-comment">// 保存目标路径</span>
        <span class="hljs-attr">reason</span>: <span class="hljs-string">&#x27;authentication&#x27;</span>, <span class="hljs-comment">// 重定向原因</span>
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()     <span class="hljs-comment">// 时间戳</span>
      &#125;,
      <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 替换当前历史记录</span>
    &#125;);
    <span class="hljs-keyword">return</span>;
  &#125;
  
  <span class="hljs-comment">// 已认证用户访问登录页</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">&#x27;/login&#x27;</span> &amp;&amp; <span class="hljs-title function_">isAuthenticated</span>()) &#123;
    <span class="hljs-title function_">next</span>(&#123;
      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Dashboard&#x27;</span>, <span class="hljs-comment">// 使用命名路由</span>
      <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">welcome</span>: <span class="hljs-literal">true</span> &#125;
    &#125;);
    <span class="hljs-keyword">return</span>;
  &#125;
  
  <span class="hljs-title function_">next</span>();
&#125;);</code></pre></div><p>next的错误处理用法：</p><div class="code-wrapper"><pre><code class="hljs js">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">try</span> &#123;
    <span class="hljs-comment">// 执行复杂的验证逻辑</span>
    <span class="hljs-title function_">performComplexValidation</span>(to);
    <span class="hljs-title function_">next</span>(); <span class="hljs-comment">// 验证通过</span>
  &#125; <span class="hljs-keyword">catch</span> (error) &#123;
    <span class="hljs-comment">// 传递错误对象，触发全局错误处理</span>
    <span class="hljs-title function_">next</span>(error);
  &#125;
&#125;);

<span class="hljs-comment">// 全局错误处理</span>
router.<span class="hljs-title function_">onError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;导航错误:&#x27;</span>, error);
  
  <span class="hljs-comment">// 根据错误类型处理</span>
  <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;ValidationError&#x27;</span>) &#123;
    <span class="hljs-title function_">showValidationError</span>(error.<span class="hljs-property">message</span>);
  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;NetworkError&#x27;</span>) &#123;
    <span class="hljs-title function_">showNetworkError</span>();
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-title function_">showGenericError</span>();
  &#125;
&#125;);</code></pre></div><h4 id="执行顺序">执行顺序</h4><p>一个完整的完整的导航解析流程如下：</p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251005000038956-2025-10-500:00:45.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="完整的导航解析流程" style="zoom:80%"></p><p>当进行权限校验时：全局守卫进行基础校验 → 路由独享守卫进行特定校验 → 组件守卫进行最终校验</p><h2 id="七pinia">七、pinia</h2><p>Pinia 是 Vue.js 的官方<strong>状态管理库</strong>，它允许你跨组件或页面共享状态。<a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/">官网</a></p><div class="note note-info"><p>状态管理是前端开发中的一个核心概念，它指的是在应用程序中<strong>集中</strong>管理、存储和更新组件的共享状态。在复杂的应用中，多个组件可能需要访问和修改相同的数据，状态管理提供了一种统一的方式来处理这些数据，使得数据流变得可预测和易于维护。</p></div><hr><p>为什么需要pinia?</p><p>在Vue中，组件通常有自己的局部状态（例如，一个计数器组件的计数值）。但是，当多个组件需要共享状态时，可以通过以下方式：</p><ol type="1"><li><strong>父子组件通信</strong>：通过props将状态从父组件传递给子组件，通过事件向上传递修改。但当组件层次深、兄弟组件之间需要共享状态时，这种方式会变得复杂。</li><li><strong>事件总线/全局事件</strong>：通过一个全局的事件系统来通信，但这样容易导致代码难以维护和调试。</li><li><strong>状态管理库</strong>：如Pinia、Vuex、Redux等，它们提供了一个全局的状态容器，任何组件都可以访问和修改，同时遵循一定的规则，使得状态的变化可预测。</li></ol><h3 id="安装和使用">7.1 安装和使用</h3><p>首先，在项目中安装pinia</p><div class="code-wrapper"><pre><code class="hljs bash">npm install pinia</code></pre></div><p>然后，在<code>main.ts</code>中创建并安装 pinia实例</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>
<span class="hljs-comment">//1、引入pinia</span>
<span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
<span class="hljs-comment">//2、创建pinia实例</span>
<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()
<span class="hljs-comment">//3、安装pinia</span>
app.<span class="hljs-title function_">use</span>(pinia)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)</code></pre></div><h3 id="store">7.2 store</h3><p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p><p>各个store通常集中保存在<code>src\store</code>目录下，命名规范：以 <code>use</code> 开头，以 <code>Store</code> 结尾。比如 <code>useUserStore</code>，<code>useCartStore</code></p><p>Pinia 使用 <code>defineStore</code> 函数来定义一个 store。</p><ul><li><p><code>defineStore()</code> 的返回值的命名与文件名相同，遵循命名规范。</p></li><li><p>它的第一个参数是唯一 id 。</p></li><li><p>它的第二个参数可接受两类值：Setup 函数或 Option 对象。</p></li></ul><p>每个store可以包含 <strong>state</strong>、<strong>getters</strong> 和 <strong>actions</strong>，定义在它的第二个参数中。</p><ul><li>state：应用程序的<strong>数据源</strong>，即需要管理的各种数据。</li><li>getters：基于 state 的<strong>计算属性</strong>，用于派生状态。</li><li>actions：<strong>修改 state 的方法</strong>，可以包含异步操作，用于处理业务逻辑。</li></ul><hr><p>选项式API写法，第二个参数是传入一个带有 <code>state</code>、<code>actions</code> 与 <code>getters</code> 属性的 Option 对象</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;

<span class="hljs-comment">//创建并导出容器</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;count&quot;</span>, &#123;
  <span class="hljs-comment">//存储数据</span>
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;
    <span class="hljs-attr">sum</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;zhangsan&quot;</span>,
  &#125;),
  <span class="hljs-comment">//类似计算属性</span>
  <span class="hljs-attr">getters</span>: &#123;
    <span class="hljs-attr">bigSum</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span>,
  &#125;,
  <span class="hljs-comment">//专门用于修改state</span>
  <span class="hljs-attr">actions</span>: &#123;
    <span class="hljs-title function_">add</span>(<span class="hljs-params">num: number</span>) &#123;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> += num; <span class="hljs-comment">//使用this访问数据</span>
    &#125;,
    <span class="hljs-title function_">isEvenNumber</span>(<span class="hljs-params"></span>) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
    &#125;,
  &#125;,
&#125;);
</code></pre></div><p>组合式API写法：第二个参数传入一个函数，类似于<code>setup()</code>函数，该函数定义了一些响应式属性和方法，并且返回一个带有我们想暴露出去的属性和方法的对象。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;
<span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-comment">//存储数据：state</span>
  <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">6</span>);

  <span class="hljs-comment">//计算属性：getter</span>
  <span class="hljs-keyword">let</span> bigSum = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> sum.<span class="hljs-property">value</span> * <span class="hljs-number">10</span>);

  <span class="hljs-comment">//专门用于修改state：action</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">num: number</span>) &#123;
    sum.<span class="hljs-property">value</span> += num;
  &#125;
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">isEvenNumber</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-keyword">return</span> sum.<span class="hljs-property">value</span> % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
  &#125;

  <span class="hljs-comment">//导出需要使用的数据和方法</span>
  <span class="hljs-keyword">return</span> &#123; sum, bigSum, add, isEvenNumber &#125;;
&#125;);
</code></pre></div><hr><p>正确使用Store： Store 存储的应该是在需要整个应用中访问的数据，避免在 Store 中引入那些原本可以在组件中保存的本地数据，例如，一个元素在页面中的可见性。</p><h3 id="state">7.3. state</h3><p>state 是store 的核心，存储应用数据。</p><ul><li>在选项式API中，state 是一个返回初始状态的函数</li><li>在组合式API中，state 是函数中定义的 数据，需要手动导出</li></ul><h4 id="读取数据">读取数据</h4><ol type="1"><li><p>引入并获取对应的store实例</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//引入store</span>
<span class="hljs-keyword">import</span> &#123; useCountStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store/useCountStore&quot;</span>; 
<span class="hljs-comment">//获得 store实例</span>
<span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countStore);</code></pre></div><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20251005114733860-2025-10-511:47:44.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="store的结构" style="zoom:80%"></p></li><li><p>读取数据</p><p>store是一个<code>Proxy</code>对象，在state中定义的数据<code>sum</code>变成了它的<code>ref</code>对象属性。此外，整体的state被封装成代理对象<code>$state</code>，定义的数据存储在其中。因此有两种读取方法：</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//1、store实例.属性</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countStore.<span class="hljs-property">sum</span>);
<span class="hljs-comment">//2、通过$state获取</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(countStore.<span class="hljs-property">$state</span>.<span class="hljs-property">sum</span>);</code></pre></div></li></ol><hr><p>可以借助<code>storeToRefs()</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</p><p>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将<strong>数据（包括计算属性）</strong>做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中的所有数据。</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前求和 &#123;&#123; sum &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCountStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store/useCountStore&quot;</span>;</span>
<span class="language-javascript"><span class="hljs-comment">//引入storeToRefs    </span></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; storeToRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;</span>
<span class="language-javascript"><span class="hljs-comment">//得到countStore    </span></span>
<span class="language-javascript"><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()</span>
<span class="language-javascript"><span class="hljs-comment">//使用storeToRefs转换countStore，随后解构</span></span>
<span class="language-javascript"><span class="hljs-keyword">let</span> &#123; sum, name &#125; = <span class="hljs-title function_">storeToRefs</span>(countStore)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h4 id="修改数据">修改数据</h4><ol type="1"><li><p>直接修改</p><div class="code-wrapper"><pre><code class="hljs js">countStore.<span class="hljs-property">sum</span> += <span class="hljs-number">1</span></code></pre></div></li><li><p>批量修改：<code>$patch</code> 方法</p><p>允许你用一个 <code>state</code> 的补丁对象在同一时间更改多个属性</p><div class="code-wrapper"><pre><code class="hljs js">countStore.$patch(&#123;
    <span class="hljs-attr">sum</span>: countStore.<span class="hljs-property">sum</span> + n.<span class="hljs-property">value</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>
&#125;)</code></pre></div></li><li><p>借助<code>action</code>修改</p><p>在actions中自定义修改逻辑，使用时进行调用</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//定义action方法</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">num: number</span>) &#123;
    sum.<span class="hljs-property">value</span> += num;
    name.<span class="hljs-property">value</span> = <span class="hljs-string">&quot;王五&quot;</span>;
&#125;

<span class="hljs-comment">//调用action方法</span>
countStore.<span class="hljs-title function_">add</span>(<span class="hljs-number">10</span>)</code></pre></div></li></ol><h4 id="订阅数据变化">订阅数据变化</h4><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化，它接收两个参数：</p><ol type="1"><li><code>mutation</code>：本次的修改信息，</li><li><code>state</code>: 修改后的数据</li></ol><div class="code-wrapper"><pre><code class="hljs js">countStore.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> &#123;
    <span class="hljs-comment">//state数据每次发生变化时调用</span>
    <span class="hljs-comment">//比如，每当状态发生变化时，将整个 state 持久化到本地存储</span>
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;count&#x27;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))
&#125;)</code></pre></div><p>在底层实现上，<code>$subscribe()</code> 使用了 Vue 的 <code>watch()</code> 函数，可以传入与 <code>watch()</code> 相同的选项。</p><h3 id="getter">7.4 getter</h3><p>getter 完全等同于 store 的 state 的<strong>计算属性</strong>。</p><p>采用组合式API时，直接使用计算属性代替getter即可。因此，可以像组合计算属性一样组合getter。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-comment">//存储数据：state</span>
  <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">6</span>);
  <span class="hljs-keyword">let</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>);

  <span class="hljs-comment">//计算属性：getter</span>
  <span class="hljs-keyword">let</span> bigSum = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> sum.<span class="hljs-property">value</span> * <span class="hljs-number">10</span>);
  <span class="hljs-keyword">let</span> bigSumPlusOne = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> bigSum.<span class="hljs-property">value</span> + <span class="hljs-number">1</span>); <span class="hljs-comment">//使用其他计算属性</span>

  <span class="hljs-comment">//导出需要使用的数据和方法</span>
  <span class="hljs-keyword">return</span> &#123; sum, bigSum, name, bigSumPlusOne&#125;;
&#125;);</code></pre></div><p>作为 store 的一个属性，可以直接访问任何 getter(与 state 属性完全一样)</p><hr><p>在选项式API中，可以通过 <code>getters</code> 属性来定义它们。<strong>推荐</strong>使用箭头函数，并且它将接收 <code>state</code> 作为第一个参数。你可以</p><p><u>在使用常规函数</u>定义 getter 时，可以通过 <code>this</code> 访问到<strong>整个 store 实例</strong>，进而访问到其他任何 getter。<strong>但在 TypeScript 中必须定义返回类型</strong>。</p><div class="code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;count&quot;</span>, &#123;
  <span class="hljs-comment">//存储数据</span>
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;
    <span class="hljs-attr">sum</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;zhangsan&quot;</span>,
  &#125;),
  <span class="hljs-comment">//类似计算属性</span>
  <span class="hljs-attr">getters</span>: &#123;
    <span class="hljs-attr">bigSum</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span>,
    
    <span class="hljs-comment">//调用其他的getters</span>
    <span class="hljs-title function_">bigSumPlusOne</span>(): number &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigSum</span> + <span class="hljs-number">1</span>;
    &#125;
  &#125;,
&#125;);
</code></pre></div><h3 id="actions">7.5 actions</h3><p>action 相当于组件中的<code>method</code>，可以定义一些业务逻辑。</p><p>此外，<strong><code>action</code> 可以是异步的</strong>，你可以在它们里面 <code>await</code> 调用任何 API，以及其他 action</p><h2 id="八组件通信">八、组件通信</h2><p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p><ul><li><p>移除事件总线，使用<code>mitt</code>代替。</p></li><li><p><code>vuex</code>换成了<code>pinia</code>。</p></li><li><p>把<code>.sync</code>优化到了<code>v-model</code>里面了。</p></li><li><p>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</p></li><li><p><code>$children</code>被砍掉了。</p></li></ul><p><strong>常见搭配形式：</strong></p><p><img src="https://gitee.com/cmyk359/img/raw/master/img/image-20231119185900990-2025-10-522:35:14.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="zoom:60%"></p><h3 id="props-1">8.1 props</h3><h2 id="九其他api">九、其他API</h2><h2 id="十vue3-新组件">十、Vue3 新组件</h2><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/JavaWeb/" class="category-chain-item">JavaWeb</a></span></span></div></div><div class="license-box my-3"><div class="license-title"><div>Vue3</div><div>https://catpaws.top/3a42db2d/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>猫爪在上</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年3月2日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/364ea8cc/" title="设计模式"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">设计模式</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/eb9166f8/" title="Java并发编程"><span class="hidden-mobile">Java并发编程</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="twikoo"></div><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){Fluid.utils.createScript("https://catpaws.top/blog-resource/twikoo1.6.42/twikoo.all.min.js",(function(){var t=Object.assign({envId:"https://catpaws-comments.netlify.app/.netlify/functions/twikoo",region:"ap-shanghai",path:"window.location.pathname"},{el:"#twikoo",path:"window.location.pathname",onCommentLoaded:function(){Fluid.utils.listenDOMLoaded((function(){var t="#twikoo .tk-content img:not(.tk-owo-emotion)";Fluid.plugins.imageCaption(t),Fluid.plugins.fancyBox(t)}))}});twikoo.init(t)}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",(function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded((function(){Fluid.events.registerRefreshCallback((function(){"mermaid"in window&&mermaid.init()}))}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content">人山人海，欢迎你的到来 <i class="iconfont icon-love"></i><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><br><span><a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral">本站由<img src="/img/upyun_logo.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload style="width:auto;height:auto">提供CDN加速/云存储服务</a></span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">陕ICP备2025059828号 </a></span><span><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61032302000087" rel="nofollow noopener" class="beian-police" target="_blank"><span style="visibility:hidden;width:0">|</span> <img src="/img/police_beian.png" srcset="https://catpaws.top/blog-resource/imgs/transparent.svg" lazyload alt="police-icon"> <span>陕公网安备61032302000087号</span></a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="//catpaws.top/blog-resource/js/timeDate.js"></script><script src="//sdk.jinrishici.com/v2/browser/jinrishici.js"></script><script src="//catpaws.top/blog-resource/js/loader.js"></script><script src="//catpaws.top/blog-resource/js/blurpicload.js"></script><script src="//catpaws.top/blog-resource/js/axios.min.js"></script><script src="/js/boot.js"></script><!DOCTYPE html><html><head><style>#matechat-iframe-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}#matechat-iframe-container.active{opacity:1;visibility:visible}.matechat-iframe{width:100%;height:100%;border:none;background:#fff}#matechat-iframe-container.active .matechat-close-btn{opacity:1}body.matechat-open{overflow:hidden}</style></head><body><div id="matechat-iframe-container"><iframe class="matechat-iframe" src="https://chat.catpaws.top" allow="microphone" title="芙芙来帮你"></iframe></div><script>document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("oml2d-stage"),t=document.getElementById("matechat-iframe-container");function n(){t.classList.remove("active"),document.body.classList.remove("matechat-open")}e?t?(e.addEventListener("click",(function(){t.classList.add("active"),document.body.classList.add("matechat-open")})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&n()})),window.addEventListener("message",(function(e){"closeMateChat"!==e.data&&"close"!==e.data.type||n()})),t.addEventListener("click",(function(e){e.target===this&&n()}))):console.error("matechat-iframe-container 元素未找到"):console.error("oml2d-stage 元素未找到")}))</script><script data-pjax src="https://catpaws.top/blog-resource/live2d/index.min.js"></script><script>const oml2d=OML2D.loadOml2d({dockedPosition:"left",mobileDisplay:!1,models:[{path:"https://catpaws.top/blog-resource/live2d/Frieren/Frieren.model3.json",motionPreloadStrategy:"IDLE",position:[-60,-100],scale:.06,stageStyle:{width:250,height:350}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:!1,tips:{style:{width:200,height:90,left:"calc(50% - 20px)",top:"-100px","font-size":"14px"}}})</script></body></html><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>