<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/static/img/webicon.png"><link rel="icon" href="https://cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/static/img/webicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="猫爪在上"><meta name="keywords" content=""><meta name="description" content="SQL练习   img   **1*、查询编号为01的课程比02的课程成绩高的所有学生的学号**  -- 1、使用带有EXISTS谓词的子查询 SELECT s_id  FROM score s1  WHERE s1.c_id &#x3D; &#x27;01&#x27;  	AND EXISTS ( SELECT * FROM score s2 WHERE s1.s_id &#x3D; s2.s_"><meta property="og:type" content="article"><meta property="og:title" content="MySQL（三）"><meta property="og:url" content="https://catpaws.top/f07c622d/index.html"><meta property="og:site_name" content="猫爪在上de书桌"><meta property="og:description" content="SQL练习   img   **1*、查询编号为01的课程比02的课程成绩高的所有学生的学号**  -- 1、使用带有EXISTS谓词的子查询 SELECT s_id  FROM score s1  WHERE s1.c_id &#x3D; &#x27;01&#x27;  	AND EXISTS ( SELECT * FROM score s2 WHERE s1.s_id &#x3D; s2.s_"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-12-08T16:07:44.000Z"><meta property="article:modified_time" content="2024-12-08T16:10:35.461Z"><meta property="article:author" content="猫爪在上"><meta name="twitter:card" content="summary_large_image"><title>MySQL（三） - 猫爪在上de书桌</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/source/css/font.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/source/css/poem.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"catpaws.top",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"TNTPv22capMq3aFV9S0sLqSm-gzGzoHsz",app_key:"G2BBAxXmiixopVg5mIJ2sxXR",server_url:"https://tntpv22c.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>猫爪在上de书桌</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-addrcard"></i> <span>主页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> <span>博客</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/" target="_self"><i class="iconfont icon-pen"></i> <span>文章</span> </a><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item"><a class="nav-link" href="/messages/" target="_self"><i class="iconfont icon-comment"></i> <span>留言板</span></a></li><li class="nav-item"><a class="nav-link" href="/timeline/" target="_self"><i class="iconfont icon-images"></i> <span>时光轴</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/static/img/article-bg.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="MySQL（三）"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-12-09 00:07" pubdate>2024年12月9日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 16 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">MySQL（三）</h1><p id="updated-time" class="note note-info">本文最后更新于 2024年12月9日 凌晨</p><div class="markdown-body"><meta name="referrer" , content="no-referrer"><h1 id="sql练习"><u><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1q4411G7Lw">SQL练习</a></u></h1><figure><img src="https://gitee.com/cmyk359/img/raw/master/img/v2-86fd263583a6cead51675982c1735e68_r-2024-9-1211:39:45.jpg" srcset="/img/loading.gif" lazyload alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>**1*、查询编号为01的课程比02的课程成绩高的所有学生的学号**</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 1、使用带有EXISTS谓词的子查询</span>
<span class="hljs-keyword">SELECT</span> s_id 
<span class="hljs-keyword">FROM</span> score s1 
<span class="hljs-keyword">WHERE</span> s1.c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span> 
	<span class="hljs-keyword">AND</span> <span class="hljs-keyword">EXISTS</span> ( <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> score s2 <span class="hljs-keyword">WHERE</span> s1.s_id <span class="hljs-operator">=</span> s2.s_id <span class="hljs-keyword">AND</span> s2.c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;02&#x27;</span> <span class="hljs-keyword">AND</span> s1.s_score <span class="hljs-operator">&gt;</span> s2.s_score );
	
<span class="hljs-comment">-- 2、基于派生表的查询，期望构建出一张表，其中包含，学生的id，01课程的成绩，02课程的成绩，然后通过简单的比较，得出结果</span>
<span class="hljs-keyword">SELECT</span> s1.s_id <span class="hljs-string">&#x27;Sno&#x27;</span>,s1.s_score <span class="hljs-string">&#x27;grade_01&#x27;</span>, s2.s_score <span class="hljs-string">&#x27;grade_02&#x27;</span>
<span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> s_id, c_id, s_score <span class="hljs-keyword">FROM</span> score  <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>)  <span class="hljs-keyword">AS</span> s1
			<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (<span class="hljs-keyword">SELECT</span> s_id, c_id, s_score <span class="hljs-keyword">FROM</span> score  <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;02&#x27;</span>) <span class="hljs-keyword">AS</span> s2 <span class="hljs-keyword">ON</span> s1.s_id <span class="hljs-operator">=</span> s2.s_id
<span class="hljs-keyword">WHERE</span> s1.s_score <span class="hljs-operator">&gt;</span> s2.s_score;

<span class="hljs-comment">-- 构造派生表练习：</span>
<span class="hljs-comment">-- 找出每个学生超过他自己选修课程平均成绩的课程号和成绩</span>
	<span class="hljs-keyword">SELECT</span> s_id, c_id, s_score, s1.avg_grade 
	<span class="hljs-keyword">FROM</span> score, (<span class="hljs-keyword">SELECT</span> s_id, <span class="hljs-built_in">AVG</span>(s_score) <span class="hljs-keyword">FROM</span> score <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id) <span class="hljs-keyword">AS</span> s1(avg_s_id, avg_grade) 
	<span class="hljs-keyword">WHERE</span> score.s_id <span class="hljs-operator">=</span> s1.avg_s_id <span class="hljs-keyword">AND</span> score.s_score <span class="hljs-operator">&gt;</span>	s1.avg_grade;</code></pre></div><p>==注：每个派生表都必须指定一个别名，在其中可以定义查询出字段的名字==</p><p>总结：对于一个查询，思考能否将所需要的字段纳入到一张表中，然后通过在这个表中进行简单查找就能得出答案</p><blockquote><p><strong>2、查询平均成绩大于60分的学生的学号和平均成绩</strong></p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">--思路：1、期望得到一张表，其中包含学号和平均成绩，直接从中选择平均成绩大于60的即可</span>
<span class="hljs-keyword">SELECT</span> s1.s_id, s1.avg_grade 
<span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> s_id, <span class="hljs-built_in">AVG</span>(s_score) <span class="hljs-keyword">FROM</span> score <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id) <span class="hljs-keyword">AS</span> s1(s_id, avg_grade) 
<span class="hljs-keyword">WHERE</span> s1.avg_grade <span class="hljs-operator">&gt;</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">--思路：2、使用group by 对score表进行分组，再使用avg计算每组的平均值，最后使用having 选出平均值大于60的</span>
<span class="hljs-comment">-- 注：聚集函数只能用于select和having子句中，不能直接用与where子句；</span>
<span class="hljs-keyword">SELECT</span> s_id, <span class="hljs-built_in">AVG</span>(s_score) 
<span class="hljs-keyword">FROM</span> score
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id;
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">AVG</span>(s_score) <span class="hljs-operator">&gt;</span> <span class="hljs-number">60</span></code></pre></div><blockquote><p><strong>3、查询所有学生的学号、姓名、选课数、总成绩</strong></p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 这些信息涉及的表有：student和score，</span>
<span class="hljs-comment">--1、由于要查询所有的学生选课及分数，连接时必须使用左连接，若使用inner join所求的是交集，没选课的学生信息将不包含在内。</span>
<span class="hljs-comment">-- 2、分组后统计个数用count，求和用sum</span>
<span class="hljs-comment">-- 3、使用 CASE WHEN语句做判断，当成绩为null时，返回0</span>
<span class="hljs-keyword">SELECT</span>
    s.s_id <span class="hljs-string">&#x27;学号&#x27;</span>,
    s.s_name <span class="hljs-string">&#x27;姓名&#x27;</span>,
    sc.count <span class="hljs-string">&#x27;选课数&#x27;</span>,
    sc.sum <span class="hljs-string">&#x27;总成绩&#x27;</span>
<span class="hljs-keyword">FROM</span> student s
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span>
    (<span class="hljs-keyword">SELECT</span>
         s_id,
         <span class="hljs-built_in">COUNT</span>(c_id),
         <span class="hljs-built_in">SUM</span>(IF(s_score <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>, <span class="hljs-number">0</span>, s_score))  
     		<span class="hljs-comment">-- IF(condition, true_value, false_value)</span>
     <span class="hljs-keyword">FROM</span> score
     <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id) <span class="hljs-keyword">AS</span> sc(s_id,count,sum)
    <span class="hljs-keyword">ON</span> s.s_id <span class="hljs-operator">=</span> sc.s_id;</code></pre></div><blockquote><p>4、查询姓侯的老师的人数</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 首先用like查出所有姓侯的老师，再用count统计个数</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(t_id)
<span class="hljs-keyword">FROM</span> teacher
<span class="hljs-keyword">WHERE</span> t_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;侯%&#x27;</span></code></pre></div><blockquote><p>5*、查询没学过张三老师课的学生的学号和姓名 （<strong>先做逆命题</strong>）</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 首先考虑这个问题的逆命题：先查学过张三老师课的学生的学号，最后查student表，返回不属于这个集合的学生即为所求</span>

<span class="hljs-comment">--思路一：一步步嵌套查询得到结果</span>

<span class="hljs-comment">-- 3、返回没有选张三老师课的学生的学号和姓名</span>
<span class="hljs-keyword">SELECT</span> st.s_id, st.s_name
<span class="hljs-keyword">FROM</span> student st
<span class="hljs-keyword">WHERE</span> st.s_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
	<span class="hljs-comment">-- 2、返回选了张三老师课的学生id</span>
	<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s.s_id
	<span class="hljs-keyword">FROM</span> score s 
	<span class="hljs-keyword">WHERE</span> s.c_id <span class="hljs-keyword">IN</span> (
		<span class="hljs-comment">-- 1、连接course表和teacher表，从中选出张三老师教的所有课的c_id</span>
		<span class="hljs-keyword">SELECT</span> c.c_id 
		<span class="hljs-keyword">FROM</span>
			course c
			<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> teacher t <span class="hljs-keyword">ON</span> ( c.t_id <span class="hljs-operator">=</span> t.t_id <span class="hljs-keyword">AND</span> t.t_name <span class="hljs-operator">=</span> &quot;张三&quot; ) 
	)
);

<span class="hljs-comment">-- 思路二：通过构建一个派生表，包含（s_id,c_id,t_id,t_name）即可从中选出学习了张三老师课的学生，最后得出没选的学生</span>
<span class="hljs-comment">-- 2、返回没有选张三老师课的学生的学号和姓名</span>
<span class="hljs-keyword">SELECT</span> st.s_id, st.s_name
<span class="hljs-keyword">FROM</span> student st
<span class="hljs-keyword">WHERE</span> st.s_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
	<span class="hljs-comment">-- 1、查出学习了张三老师课的学生id</span>
	<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s.s_id
	<span class="hljs-keyword">FROM</span>
		score s <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> course c <span class="hljs-keyword">ON</span> s.c_id <span class="hljs-operator">=</span> c.c_id
		<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> teacher t <span class="hljs-keyword">ON</span> t.t_id <span class="hljs-operator">=</span> c.t_id
	<span class="hljs-keyword">WHERE</span> t.t_name <span class="hljs-operator">=</span> &quot;张三&quot;
)</code></pre></div><blockquote><p>6*、查询学过张三老师课的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路：通过表间连接，得到一张包含（学号，姓名，所学课程，任课老师）的表</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> st.s_id, st.s_name
<span class="hljs-keyword">FROM</span>
	<span class="hljs-comment">-- 由于只找选了张三老师课的学生，故直接用inner join即可</span>
	student st
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> score s <span class="hljs-keyword">on</span> st.s_id <span class="hljs-operator">=</span> s.s_id
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> course c <span class="hljs-keyword">on</span> s.c_id <span class="hljs-operator">=</span> c.c_id
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> teacher t <span class="hljs-keyword">on</span> (c.t_id <span class="hljs-operator">=</span> t.t_id <span class="hljs-keyword">AND</span> t.t_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;张三&#x27;</span>);</code></pre></div><blockquote><p>7*、查询学过编号为01的课程并且学过编号为02的课程的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路一：先查学过01课程的学生学号，再查学过02课程的学生学号，再求两个的交集即可（通过inner join求结果集的交集）</span>
<span class="hljs-keyword">SELECT</span> s_id,s_name
<span class="hljs-keyword">FROM</span> student
<span class="hljs-keyword">WHERE</span> s_id <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
    <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> s_id <span class="hljs-keyword">FROM</span> score  <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>) <span class="hljs-keyword">AS</span> sc1
         <span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">JOIN</span>
         (<span class="hljs-keyword">SELECT</span> s_id <span class="hljs-keyword">FROM</span> score  <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;02&#x27;</span>) <span class="hljs-keyword">AS</span> sc2
    )


<span class="hljs-comment">-- 思路二：在score表中筛选出选修了01课程的学生，同时对应选出的元组使用EXISTS谓词筛选选修了02课程的</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span> student st
<span class="hljs-keyword">WHERE</span> st.s_id <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> sc1.s_id
    <span class="hljs-keyword">FROM</span> score sc1
    <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">EXISTS</span>(<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> score sc2 <span class="hljs-keyword">WHERE</span> sc1.s_id <span class="hljs-operator">=</span> sc2.s_id <span class="hljs-keyword">AND</span>  sc2.c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;02&#x27;</span>)
    );
    
<span class="hljs-comment">--思路三：查询score表，将课程号是01或02的元组保留，并按学号分组，查询每组的元组个数，若为2则为选修了01和02 的学生</span>
<span class="hljs-keyword">SELECT</span> st.s_id, st.s_name
<span class="hljs-keyword">FROM</span> score s <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 	student st <span class="hljs-keyword">ON</span> s.s_id <span class="hljs-operator">=</span> st.s_id
<span class="hljs-keyword">WHERE</span> s.c_id <span class="hljs-keyword">IN</span> (&quot;01&quot;,&quot;02&quot;)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s.s_id
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(s.s_id) <span class="hljs-operator">=</span> <span class="hljs-number">2</span></code></pre></div><blockquote><p>8、查询课程编号为02的总成绩</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 选出课程编号为02记录，统计其中分数的总和</span>
<span class="hljs-keyword">SELECT</span> c_id,<span class="hljs-built_in">SUM</span>(s_score)
<span class="hljs-keyword">FROM</span> score
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> c_id
<span class="hljs-keyword">HAVING</span> c_id <span class="hljs-operator">=</span> &quot;02&quot;


<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(s_score)
<span class="hljs-keyword">FROM</span> score
<span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> &quot;02&quot;</code></pre></div><blockquote><p>9、查询所有课程成绩小于60分的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 使用内连接</span>
<span class="hljs-keyword">SELECT</span>	st.s_id, st.s_name, s.c_id, s.s_score
<span class="hljs-keyword">FROM</span> score s <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> student st <span class="hljs-keyword">on</span> s.s_id <span class="hljs-operator">=</span> st.s_id
<span class="hljs-keyword">WHERE</span> s.s_score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>

<span class="hljs-comment">--使用子查询</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s_id,s_name
<span class="hljs-keyword">FROM</span> student
<span class="hljs-keyword">WHERE</span> s_id <span class="hljs-keyword">IN</span> (
	<span class="hljs-keyword">SELECT</span> s_id
	<span class="hljs-keyword">FROM</span> score
	<span class="hljs-keyword">WHERE</span> s_score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
)</code></pre></div><blockquote><p>10*、查询没有学全所有课的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路一：查询所有课程的总数，将score表和student表连接后按照学号分组，若某组的总数小于总的课程数，即为没学全所有课程的学生。</span>

<span class="hljs-keyword">SELECT</span> st.s_id, st.s_name
<span class="hljs-keyword">FROM</span> student st
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> score s
        <span class="hljs-keyword">ON</span> st.s_id <span class="hljs-operator">=</span> s.s_id
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> st.s_id
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(c_id) <span class="hljs-operator">&lt;</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(c_id)
    <span class="hljs-keyword">FROM</span> course
    );</code></pre></div><blockquote><p>11*、查询至少有一门课与学号为01的学生所学课程相同的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路：1、学号为01的学生学了哪些课  2、直接将student表和score表连接，从中选出符合条件的学生</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> student.s_id,s_name
<span class="hljs-keyword">FROM</span> score <span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">JOIN</span> student
<span class="hljs-keyword">WHERE</span> c_id <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> c_id
    <span class="hljs-keyword">FROM</span> score
    <span class="hljs-keyword">WHERE</span> s_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
    ) 
    <span class="hljs-keyword">AND</span> s_id <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;01&#x27;</span>;
    
<span class="hljs-comment">-- 其他写法 </span>
 <span class="hljs-keyword">SELECT</span> s_id, s_name
<span class="hljs-keyword">FROM</span> student
<span class="hljs-keyword">WHERE</span> s_id <span class="hljs-keyword">IN</span> ( <span class="hljs-comment">--使用IN</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s_id
    <span class="hljs-keyword">FROM</span> score
    <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-keyword">IN</span> (
                <span class="hljs-keyword">SELECT</span> c_id
                <span class="hljs-keyword">FROM</span> score
                <span class="hljs-keyword">WHERE</span> s_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
                )
        <span class="hljs-keyword">AND</span> s_id <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;01&#x27;</span>
    )
    
<span class="hljs-keyword">SELECT</span> a.s_id, a.s_name
<span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">AS</span> a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-comment">-- 用INNER JOIN代替 IN,数据量较大时比IN的效率高</span>
    (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s_id
        <span class="hljs-keyword">FROM</span> score
        <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-keyword">IN</span> (
            <span class="hljs-keyword">SELECT</span> c_id
            <span class="hljs-keyword">FROM</span> score
            <span class="hljs-keyword">WHERE</span> s_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
            )
            <span class="hljs-keyword">AND</span> s_id <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;01&#x27;</span>
    ) <span class="hljs-keyword">AS</span> b
<span class="hljs-keyword">ON</span> a.s_id <span class="hljs-operator">=</span> b.s_id;</code></pre></div><blockquote><p>12*、查询与学号为01的学生所学课程<strong>完全相同</strong>的学生的学号和姓名</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路：1、查询出学号为01的学生学了哪些课 </span>
<span class="hljs-comment">--		2、从score表中将有与学号为01同学选课重叠的记录都保留下来，如01同学选了课程号为01,02,03的		   课程，使用谓词IN从score表中将选课编号包含在内的记录都保留下来，按照学号分组，统计每组的			个数，保留选课数量与01同学选课数量相同的组，即找到了与其所选课程完全相同的学生学号</span>
<span class="hljs-comment">--		3、可以使用谓词IN或INNNER JOIN从student表中得到学号和姓名</span>

<span class="hljs-keyword">SELECT</span> a.s_id, a.s_name
<span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">AS</span> a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (    <span class="hljs-comment">-- 3、INNER JOIN代替 IN</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s_id
    <span class="hljs-keyword">FROM</span> score
    <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-keyword">IN</span> ( <span class="hljs-comment">--1、筛选所选课程编号在01同学选课编号集合中的记录</span>
        <span class="hljs-keyword">SELECT</span> c_id <span class="hljs-keyword">FROM</span> score <span class="hljs-keyword">WHERE</span> s_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
        )
        <span class="hljs-keyword">AND</span> s_id <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;01&#x27;</span>
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id <span class="hljs-comment">--2、按学号分组，统计每组的选课数</span>
    <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(c_id) <span class="hljs-operator">=</span> (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(c_id) <span class="hljs-keyword">FROM</span> score <span class="hljs-keyword">WHERE</span> s_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
        )
) <span class="hljs-keyword">AS</span> b
<span class="hljs-keyword">ON</span> a.s_id <span class="hljs-operator">=</span> b.s_id;</code></pre></div><blockquote><p>15**、查询两门及以上不及格课程的学生的学号姓名及平均成绩</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 思路：先使用WHERE语句筛选出课程不及格的记录，再按照学号分组，统计每组的记录数，将总数大于等于2的分组保留，返回每组对应的学号和平均成绩。再使用INNER/RIGHT JOIN与student表做连接，最终得到满足条件的学生的学号，姓名以及平均成绩</span>

<span class="hljs-keyword">SELECT</span> st.s_id, st.s_name, temp.avg_grade
<span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">AS</span> st
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s_id, <span class="hljs-built_in">AVG</span>(s_score)
    <span class="hljs-keyword">FROM</span> score
    <span class="hljs-keyword">WHERE</span> s_score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> s_id
    <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span>
) <span class="hljs-keyword">AS</span> temp(s_id, avg_grade)
<span class="hljs-keyword">ON</span> st.s_id <span class="hljs-operator">=</span> temp.s_id;</code></pre></div><blockquote><p>16、检索01课程分数小于60，按分数降序排列的学生信息</p></blockquote><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> st.s_id,
       st.s_name,
       temp.c_id,
       temp.s_score
<span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">AS</span> st
<span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> (
    <span class="hljs-keyword">SELECT</span> s_id,c_id,s_score
    <span class="hljs-keyword">FROM</span> score
    <span class="hljs-keyword">WHERE</span> c_id <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;01&#x27;</span>
        <span class="hljs-keyword">AND</span> s_score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
) <span class="hljs-keyword">AS</span> temp
<span class="hljs-keyword">ON</span> st.s_id <span class="hljs-operator">=</span> temp.s_id
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> temp.s_score <span class="hljs-keyword">DESC</span> ;</code></pre></div></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a></span></span></div></div><div class="license-box my-3"><div class="license-title"><div>MySQL（三）</div><div>https://catpaws.top/f07c622d/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>猫爪在上</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年12月9日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/146f67fb/" title="函数式编程-Stream流"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">函数式编程-Stream流</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/bd62c17f/" title="MySQL（二）"><span class="hidden-mobile">MySQL（二）</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="twikoo"></div><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){Fluid.utils.createScript("https://cdn.smartcis.cn/npm/twikoo@1.6.40/dist/twikoo.all.min.js",(function(){var t=Object.assign({envId:"https://catpaws-comments.netlify.app/.netlify/functions/twikoo",region:"ap-shanghai",path:"window.location.pathname"},{el:"#twikoo",path:"window.location.pathname",onCommentLoaded:function(){Fluid.utils.listenDOMLoaded((function(){var t="#twikoo .tk-content img:not(.tk-owo-emotion)";Fluid.plugins.imageCaption(t),Fluid.plugins.fancyBox(t)}))}});twikoo.init(t)}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",(function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded((function(){Fluid.events.registerRefreshCallback((function(){"mermaid"in window&&mermaid.init()}))}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><br>人山人海，欢迎你的到来 <i class="iconfont icon-love"></i><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="//cdn.jsdelivr.net/gh/cmyk359/MyCDN/Hexo/source/js/timeDate.js"></script><script src="//sdk.jinrishici.com/v2/browser/jinrishici.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script data-pjax src="https://unpkg.com/oh-my-live2d"></script><script>const oml2d=OML2D.loadOml2d({dockedPosition:"left",mobileDisplay:!1,models:[{path:"http://img.catpaws.top/blog-source/live2d/Frieren/Frieren.model3.json",motionPreloadStrategy:"IDLE",position:[-60,-100],scale:.06,stageStyle:{width:250,height:350}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:!1,tips:{style:{width:200,height:90,left:"calc(50% - 20px)",top:"-100px","font-size":"14px"},idleTips:{interval:15e3,message:function(){return axios.get("https://v1.hitokoto.cn?c=i").then((function(t){return t.data.hitokoto})).catch((function(t){console.error(t)}))}}}})</script></body></html>